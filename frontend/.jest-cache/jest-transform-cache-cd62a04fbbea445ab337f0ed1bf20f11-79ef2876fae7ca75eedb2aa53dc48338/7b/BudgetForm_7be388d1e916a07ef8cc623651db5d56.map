{"version":3,"names":["BudgetForm","CURRENCY_OPTIONS","cov_1fmcgl68xf","s","value","label","budget","categories","onSubmit","onCancel","f","register","handleSubmit","formState","errors","isSubmitting","watch","setValue","_reacthookform","useForm","defaultValues","b","categoryId","amount","Number","currency","period","startDate","endDate","Date","toISOString","split","handleFormSubmit","data","error","expenseCategories","filter","cat","type","categoryOptions","map","id","name","icon","periodOptions","_jsxruntime","jsxs","className","jsx","_CategorySelect","CategorySelect","options","placeholder","message","required","_Select","Select","_ui","CurrencyInput","onChange","DatePicker","maxDate","undefined","minDate","Button","variant","loading","disabled","onClick"],"sources":["E:\\my\\otus\\finance_tracker\\frontend\\src\\components\\budgets\\BudgetForm.tsx"],"sourcesContent":["import React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { Budget, Category } from \"@/types/api\";\nimport { DatePicker, CurrencyInput, Button } from \"@/components/ui\";\nimport { CategorySelect } from \"@/components/ui/CategorySelect\";\nimport { Select } from \"@/components/ui/Select\";\nimport { validateAmount, validateDate, validateDateRange } from \"@/utils/validation\";\n\ninterface BudgetFormProps {\n  budget?: Budget;\n  categories: Category[];\n  onSubmit: (data: BudgetFormData) => Promise<void>;\n  onCancel: () => void;\n}\n\nconst CURRENCY_OPTIONS = [\n  { value: \"RUB\", label: \"RUB (₽)\" },\n  { value: \"USD\", label: \"USD ($)\" },\n  { value: \"EUR\", label: \"EUR (€)\" },\n  { value: \"GBP\", label: \"GBP (£)\" },\n  { value: \"RUB\", label: \"RUB (₽)\" },\n];\n\nexport interface BudgetFormData {\n  categoryId: string;\n  amount: number;\n  currency: string;\n  period: \"monthly\" | \"yearly\";\n  startDate: string;\n  endDate: string;\n}\n\nexport function BudgetForm({\n  budget,\n  categories,\n  onSubmit,\n  onCancel,\n}: BudgetFormProps) {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isSubmitting },\n    watch,\n    setValue,\n  } = useForm<BudgetFormData>({\n    defaultValues: budget\n      ? {\n          categoryId: budget.categoryId,\n          amount: Number(budget.amount),\n          currency: budget.currency ?? \"RUB\",\n          period: budget.period,\n          startDate: budget.startDate,\n          endDate: budget.endDate,\n        }\n      : {\n          categoryId: \"\",\n          amount: 0,\n          currency: \"RUB\",\n          period: \"monthly\",\n          startDate: new Date().toISOString().split(\"T\")[0],\n          endDate: \"\",\n        },\n  });\n\n  const startDate = watch(\"startDate\");\n  const endDate = watch(\"endDate\");\n\n  const handleFormSubmit = async (data: BudgetFormData) => {\n    try {\n      await onSubmit(data);\n    } catch (error) {\n      // Error handling is done in parent component\n    }\n  };\n\n  // Filter only expense categories for budgets\n  const expenseCategories = (categories || []).filter((cat) => cat.type === \"expense\");\n  const categoryOptions = expenseCategories.map((cat) => ({\n    value: cat.id,\n    label: cat.name,\n    icon: cat.icon,\n  }));\n\n  const periodOptions = [\n    { value: \"monthly\", label: \"Месячный\" },\n    { value: \"yearly\", label: \"Годовой\" },\n  ];\n\n  return (\n    <form onSubmit={handleSubmit(handleFormSubmit)} className=\"space-y-4\">\n      <CategorySelect\n        label=\"Категория\"\n        options={categoryOptions}\n        placeholder=\"Выберите категорию\"\n        error={errors.categoryId?.message}\n        value={watch(\"categoryId\")}\n        {...register(\"categoryId\", {\n          required: \"Выберите категорию\",\n        })}\n      />\n\n      <Select\n        label=\"Валюта\"\n        options={CURRENCY_OPTIONS}\n        error={errors.currency?.message}\n        {...register(\"currency\", { required: \"Выберите валюту\" })}\n      />\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-1\">\n          Сумма бюджета\n        </label>\n        <CurrencyInput\n          value={watch(\"amount\")}\n          onChange={(value) => setValue(\"amount\", value)}\n          currency={watch(\"currency\")}\n          error={errors.amount?.message}\n        />\n      </div>\n\n      <Select\n        label=\"Период\"\n        options={periodOptions}\n        error={errors.period?.message}\n        {...register(\"period\", {\n          required: \"Выберите период\",\n        })}\n      />\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-1\">\n          Дата начала\n        </label>\n        <DatePicker\n          value={watch(\"startDate\")}\n          onChange={(value) => setValue(\"startDate\", value)}\n          error={errors.startDate?.message}\n          maxDate={endDate || undefined}\n        />\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-foreground mb-1\">\n          Дата окончания\n        </label>\n        <DatePicker\n          value={watch(\"endDate\")}\n          onChange={(value) => setValue(\"endDate\", value)}\n          error={errors.endDate?.message}\n          minDate={startDate || undefined}\n        />\n      </div>\n\n      <div className=\"flex gap-3 pt-4\">\n        <Button\n          type=\"submit\"\n          variant=\"primary\"\n          loading={isSubmitting}\n          disabled={isSubmitting}\n          className=\"flex-1\"\n        >\n          {budget ? \"Обновить\" : \"Создать\"}\n        </Button>\n        <Button\n          type=\"button\"\n          variant=\"secondary\"\n          onClick={onCancel}\n          disabled={isSubmitting}\n          className=\"flex-1\"\n        >\n          Отмена\n        </Button>\n      </div>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]}