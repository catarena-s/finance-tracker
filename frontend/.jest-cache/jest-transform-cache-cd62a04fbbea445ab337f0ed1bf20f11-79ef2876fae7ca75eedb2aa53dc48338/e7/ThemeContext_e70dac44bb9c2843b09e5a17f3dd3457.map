{"version":3,"names":["cov_11wusj9nc7","actualCoverage","s","ThemeProvider","f","useTheme","THEME_STORAGE_KEY","ThemeContext","_react","createContext","getInitialTheme","window","b","stored","localStorage","getItem","matchMedia","matches","applyTheme","theme","root","document","documentElement","classList","add","remove","children","setThemeState","useState","useEffect","initial","setTheme","useCallback","next","setItem","toggleTheme","prev","value","useMemo","_jsxruntime","jsx","Provider","ctx","useContext","Error"],"sources":["E:\\my\\otus\\finance_tracker\\frontend\\src\\contexts\\ThemeContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, {\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n  useEffect,\n  useMemo,\n  ReactNode,\n} from \"react\";\n\nconst THEME_STORAGE_KEY = \"finance-tracker-theme\";\n\ntype Theme = \"dark\" | \"light\";\n\ninterface ThemeContextValue {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextValue | null>(null);\n\nfunction getInitialTheme(): Theme {\n  if (typeof window === \"undefined\") return \"dark\";\n  const stored = localStorage.getItem(THEME_STORAGE_KEY) as Theme | null;\n  if (stored === \"light\" || stored === \"dark\") return stored;\n\n  // Определяем системную тему если нет сохраненной\n  if (window.matchMedia(\"(prefers-color-scheme: light)\").matches) {\n    return \"light\";\n  }\n  return \"dark\";\n}\n\nfunction applyTheme(theme: Theme) {\n  const root = document.documentElement;\n  if (theme === \"light\") {\n    root.classList.add(\"light\");\n  } else {\n    root.classList.remove(\"light\");\n  }\n}\n\nexport function ThemeProvider({ children }: { children: ReactNode }) {\n  const [theme, setThemeState] = useState<Theme>(\"dark\");\n\n  useEffect(() => {\n    const initial = getInitialTheme();\n    setThemeState(initial);\n    applyTheme(initial);\n  }, []);\n\n  const setTheme = useCallback((next: Theme) => {\n    setThemeState(next);\n    applyTheme(next);\n    localStorage.setItem(THEME_STORAGE_KEY, next);\n  }, []);\n\n  const toggleTheme = useCallback(() => {\n    setThemeState((prev) => {\n      const next = prev === \"dark\" ? \"light\" : \"dark\";\n      applyTheme(next);\n      localStorage.setItem(THEME_STORAGE_KEY, next);\n      return next;\n    });\n  }, []);\n\n  const value = useMemo<ThemeContextValue>(\n    () => ({\n      theme,\n      setTheme,\n      toggleTheme,\n    }),\n    [theme, setTheme, toggleTheme]\n  );\n\n  return <ThemeContext.Provider value={value}>{children}</ThemeContext.Provider>;\n}\n\nexport function useTheme(): ThemeContextValue {\n  const ctx = useContext(ThemeContext);\n  if (!ctx) throw new Error(\"useTheme must be used within ThemeProvider\");\n  return ctx;\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}