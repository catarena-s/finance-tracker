{"version":3,"sources":["E:\\my\\otus\\finance_tracker\\frontend\\__tests__\\integration\\recurring-page.test.tsx"],"sourcesContent":["/**\r\n * Integration tests — Recurring Transactions Page\r\n * Тестирование страницы повторяющихся транзакций\r\n */\r\n\r\nimport React from \"react\";\r\nimport { render, screen, waitFor } from \"@testing-library/react\";\r\nimport userEvent from \"@testing-library/user-event\";\r\nimport RecurringPage from \"@/app/recurring/page\";\r\nimport { AppProvider } from \"@/contexts/AppContext\";\r\nimport { recurringTransactionsApi } from \"@/services/api\";\r\nimport type { RecurringTransaction, Category } from \"@/types/api\";\r\n\r\n// Mock Next.js navigation\r\njest.mock(\"next/navigation\", () => ({\r\n  useSearchParams: () => ({\r\n    get: jest.fn(() => null),\r\n  }),\r\n  useRouter: () => ({\r\n    push: jest.fn(),\r\n    replace: jest.fn(),\r\n    prefetch: jest.fn(),\r\n  }),\r\n  usePathname: () => \"/recurring\",\r\n}));\r\n\r\n// Mock API\r\njest.mock(\"@/services/api\", () => ({\r\n  recurringTransactionsApi: {\r\n    getAll: jest.fn(),\r\n    create: jest.fn(),\r\n    update: jest.fn(),\r\n    delete: jest.fn(),\r\n  },\r\n  categoriesApi: {\r\n    getAll: jest.fn(),\r\n  },\r\n  transactionsApi: {\r\n    getAll: jest.fn(),\r\n  },\r\n  budgetsApi: {\r\n    getAll: jest.fn(),\r\n  },\r\n  analyticsApi: {\r\n    getSummary: jest.fn(),\r\n  },\r\n}));\r\n\r\nconst mockCategories: Category[] = [\r\n  {\r\n    id: \"cat-1\",\r\n    name: \"Продукты\",\r\n    type: \"expense\",\r\n    icon: \"shopping-cart\",\r\n    color: \"#3B82F6\",\r\n    createdAt: \"2024-01-01T00:00:00Z\",\r\n    updatedAt: \"2024-01-01T00:00:00Z\",\r\n  },\r\n  {\r\n    id: \"cat-2\",\r\n    name: \"Зарплата\",\r\n    type: \"income\",\r\n    icon: \"dollar-sign\",\r\n    color: \"#10B981\",\r\n    createdAt: \"2024-01-01T00:00:00Z\",\r\n    updatedAt: \"2024-01-01T00:00:00Z\",\r\n  },\r\n];\r\n\r\nconst mockRecurringTransactions: RecurringTransaction[] = [\r\n  {\r\n    id: \"rec-1\",\r\n    name: \"Netflix подписка\",\r\n    amount: 990,\r\n    currency: \"RUB\",\r\n    type: \"expense\",\r\n    categoryId: \"cat-1\",\r\n    description: \"Ежемесячная подписка\",\r\n    frequency: \"monthly\",\r\n    interval: 1,\r\n    startDate: \"2024-01-01\",\r\n    nextOccurrence: \"2024-02-01\",\r\n    isActive: true,\r\n    createdAt: \"2024-01-01T00:00:00Z\",\r\n    updatedAt: \"2024-01-01T00:00:00Z\",\r\n  },\r\n  {\r\n    id: \"rec-2\",\r\n    name: \"Зарплата\",\r\n    amount: 100000,\r\n    currency: \"RUB\",\r\n    type: \"income\",\r\n    categoryId: \"cat-2\",\r\n    description: \"Ежемесячная зарплата\",\r\n    frequency: \"monthly\",\r\n    interval: 1,\r\n    startDate: \"2024-01-01\",\r\n    endDate: \"2024-12-31\",\r\n    nextOccurrence: \"2024-02-01\",\r\n    isActive: true,\r\n    createdAt: \"2024-01-01T00:00:00Z\",\r\n    updatedAt: \"2024-01-01T00:00:00Z\",\r\n  },\r\n];\r\n\r\ndescribe(\"Recurring Transactions Page\", () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    (recurringTransactionsApi.getAll as jest.Mock).mockResolvedValue(\r\n      mockRecurringTransactions\r\n    );\r\n    (require(\"@/services/api\").categoriesApi.getAll as jest.Mock).mockResolvedValue(\r\n      mockCategories\r\n    );\r\n  });\r\n\r\n  it(\"renders page title and description\", async () => {\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    expect(screen.getByText(\"Повторяющиеся транзакции\")).toBeInTheDocument();\r\n    expect(\r\n      screen.getByText(/Шаблоны для автоматического создания транзакций/)\r\n    ).toBeInTheDocument();\r\n  });\r\n\r\n  it(\"loads and displays recurring transactions\", async () => {\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(recurringTransactionsApi.getAll).toHaveBeenCalled();\r\n    });\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Netflix подписка\")).toBeInTheDocument();\r\n      expect(screen.getByText(\"Зарплата\")).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  it(\"shows loading state initially\", () => {\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    expect(screen.getByText(\"Загрузка...\")).toBeInTheDocument();\r\n  });\r\n\r\n  it(\"shows empty state when no recurring transactions\", async () => {\r\n    (recurringTransactionsApi.getAll as jest.Mock).mockResolvedValue([]);\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(\r\n        screen.getByText(/Нет шаблонов повторяющихся транзакций/)\r\n      ).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  it(\"shows error message on API failure\", async () => {\r\n    (recurringTransactionsApi.getAll as jest.Mock).mockRejectedValue(\r\n      new Error(\"Network error\")\r\n    );\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Network error\")).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  it(\"displays recurring transaction details correctly\", async () => {\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Netflix подписка\")).toBeInTheDocument();\r\n    });\r\n\r\n    // Проверяем отображение суммы\r\n    expect(screen.getByText(/990/)).toBeInTheDocument();\r\n    const monthlyLabels = screen.getAllByText(/Ежемесячно/);\r\n    expect(monthlyLabels.length).toBeGreaterThan(0);\r\n  });\r\n\r\n  it(\"shows active/inactive status\", async () => {\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Netflix подписка\")).toBeInTheDocument();\r\n    });\r\n\r\n    const activeLabels = screen.getAllByText(\"Активен\");\r\n    expect(activeLabels.length).toBeGreaterThan(0);\r\n  });\r\n\r\n  it(\"can toggle recurring transaction active status\", async () => {\r\n    const user = userEvent.setup();\r\n    (recurringTransactionsApi.update as jest.Mock).mockResolvedValue({\r\n      ...mockRecurringTransactions[0],\r\n      isActive: false,\r\n    });\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Netflix подписка\")).toBeInTheDocument();\r\n    });\r\n\r\n    const toggleButtons = screen.getAllByText(\"Отключить\");\r\n    await user.click(toggleButtons[0]);\r\n\r\n    await waitFor(() => {\r\n      expect(recurringTransactionsApi.update).toHaveBeenCalledWith(\"rec-1\", {\r\n        isActive: false,\r\n      });\r\n    });\r\n  });\r\n\r\n  it(\"opens create modal when URL has openAdd=1 query param\", async () => {\r\n    const mockSearchParams = {\r\n      get: jest.fn((key: string) => (key === \"openAdd\" ? \"1\" : null)),\r\n    };\r\n    \r\n    jest.spyOn(require(\"next/navigation\"), \"useSearchParams\").mockReturnValue(mockSearchParams);\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Создать шаблон\")).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  it(\"can open edit modal\", async () => {\r\n    const user = userEvent.setup();\r\n    \r\n    // Мокаем useSearchParams чтобы не открывалось модальное окно создания\r\n    const mockSearchParams = {\r\n      get: jest.fn(() => null),\r\n    };\r\n    jest.spyOn(require(\"next/navigation\"), \"useSearchParams\").mockReturnValue(mockSearchParams);\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Netflix подписка\")).toBeInTheDocument();\r\n    });\r\n\r\n    const editButtons = screen.getAllByText(\"Изменить\");\r\n    await user.click(editButtons[0]);\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Редактировать шаблон\")).toBeInTheDocument();\r\n    }, { timeout: 3000 });\r\n  });\r\n\r\n  it(\"can open delete confirmation modal\", async () => {\r\n    const user = userEvent.setup();\r\n    \r\n    // Мокаем useSearchParams чтобы не открывалось модальное окно создания\r\n    const mockSearchParams = {\r\n      get: jest.fn(() => null),\r\n    };\r\n    jest.spyOn(require(\"next/navigation\"), \"useSearchParams\").mockReturnValue(mockSearchParams);\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Netflix подписка\")).toBeInTheDocument();\r\n    });\r\n\r\n    const deleteButtons = screen.getAllByText(\"Удалить\");\r\n    await user.click(deleteButtons[0]);\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Удалить шаблон\")).toBeInTheDocument();\r\n      expect(\r\n        screen.getByText(/Созданные транзакции сохранятся/)\r\n      ).toBeInTheDocument();\r\n    }, { timeout: 3000 });\r\n  });\r\n\r\n  it(\"can delete recurring transaction\", async () => {\r\n    const user = userEvent.setup();\r\n    (recurringTransactionsApi.delete as jest.Mock).mockResolvedValue(undefined);\r\n    (recurringTransactionsApi.getAll as jest.Mock)\r\n      .mockResolvedValueOnce(mockRecurringTransactions)\r\n      .mockResolvedValueOnce([mockRecurringTransactions[1]]);\r\n    \r\n    // Мокаем useSearchParams чтобы не открывалось модальное окно создания\r\n    const mockSearchParams = {\r\n      get: jest.fn(() => null),\r\n    };\r\n    jest.spyOn(require(\"next/navigation\"), \"useSearchParams\").mockReturnValue(mockSearchParams);\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Netflix подписка\")).toBeInTheDocument();\r\n    });\r\n\r\n    const deleteButtons = screen.getAllByText(\"Удалить\");\r\n    await user.click(deleteButtons[0]);\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Удалить шаблон\")).toBeInTheDocument();\r\n    }, { timeout: 3000 });\r\n\r\n    // Ждем пока модальное окно полностью откроется\r\n    const confirmButton = await screen.findByRole(\"button\", { name: /Удалить/i });\r\n    await user.click(confirmButton);\r\n\r\n    await waitFor(() => {\r\n      expect(recurringTransactionsApi.delete).toHaveBeenCalledWith(\"rec-1\");\r\n    });\r\n  });\r\n\r\n  it(\"closes error message when close button clicked\", async () => {\r\n    const user = userEvent.setup();\r\n    \r\n    // Мокаем useSearchParams чтобы не открывалось модальное окно создания\r\n    const mockSearchParams = {\r\n      get: jest.fn(() => null),\r\n    };\r\n    jest.spyOn(require(\"next/navigation\"), \"useSearchParams\").mockReturnValue(mockSearchParams);\r\n    \r\n    (recurringTransactionsApi.getAll as jest.Mock).mockRejectedValueOnce(\r\n      new Error(\"Network error\")\r\n    );\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    // Ждем появления сообщения об ошибке\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Network error\")).toBeInTheDocument();\r\n    }, { timeout: 3000 });\r\n\r\n    const closeButton = screen.getByLabelText(\"Закрыть\");\r\n    await user.click(closeButton);\r\n\r\n    await waitFor(() => {\r\n      expect(screen.queryByText(\"Network error\")).not.toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  it(\"renders create form when add button clicked\", async () => {\r\n    const user = userEvent.setup();\r\n    \r\n    // Мокаем useSearchParams чтобы не открывалось модальное окно создания\r\n    const mockSearchParams = {\r\n      get: jest.fn(() => null),\r\n    };\r\n    jest.spyOn(require(\"next/navigation\"), \"useSearchParams\").mockReturnValue(mockSearchParams);\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Netflix подписка\")).toBeInTheDocument();\r\n    });\r\n\r\n    // Находим кнопку \"Добавить шаблон\" в Header (она должна быть добавлена)\r\n    // Пока проверим что форма открывается через параметр URL\r\n    const mockSearchParamsWithAdd = {\r\n      get: jest.fn((key: string) => (key === \"openAdd\" ? \"1\" : null)),\r\n    };\r\n    jest.spyOn(require(\"next/navigation\"), \"useSearchParams\").mockReturnValue(mockSearchParamsWithAdd);\r\n\r\n    // Перерендерим компонент с новым параметром\r\n    const { rerender } = render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    // Проверяем что форма отображается без ошибок\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Создать шаблон\")).toBeInTheDocument();\r\n      expect(screen.getByLabelText(\"Название\")).toBeInTheDocument();\r\n      expect(screen.getByLabelText(\"Сумма\")).toBeInTheDocument();\r\n      expect(screen.getByText(\"Категория\")).toBeInTheDocument();\r\n    }, { timeout: 3000 });\r\n  });\r\n\r\n  it(\"renders edit form when edit button clicked\", async () => {\r\n    const user = userEvent.setup();\r\n    \r\n    // Мокаем useSearchParams чтобы не открывалось модальное окно создания\r\n    const mockSearchParams = {\r\n      get: jest.fn(() => null),\r\n    };\r\n    jest.spyOn(require(\"next/navigation\"), \"useSearchParams\").mockReturnValue(mockSearchParams);\r\n\r\n    render(\r\n      <AppProvider>\r\n        <RecurringPage />\r\n      </AppProvider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Netflix подписка\")).toBeInTheDocument();\r\n    });\r\n\r\n    const editButtons = screen.getAllByText(\"Изменить\");\r\n    await user.click(editButtons[0]);\r\n\r\n    // Проверяем что форма редактирования отображается без ошибок\r\n    await waitFor(() => {\r\n      expect(screen.getByText(\"Редактировать шаблон\")).toBeInTheDocument();\r\n      expect(screen.getByLabelText(\"Название\")).toBeInTheDocument();\r\n      expect(screen.getByLabelText(\"Сумма\")).toBeInTheDocument();\r\n      expect(screen.getByText(\"Категория\")).toBeInTheDocument();\r\n    }, { timeout: 3000 });\r\n  });\r\n});\r\n"],"names":["jest","mock","useSearchParams","get","fn","useRouter","push","replace","prefetch","usePathname","recurringTransactionsApi","getAll","create","update","delete","categoriesApi","transactionsApi","budgetsApi","analyticsApi","getSummary","mockCategories","id","name","type","icon","color","createdAt","updatedAt","mockRecurringTransactions","amount","currency","categoryId","description","frequency","interval","startDate","nextOccurrence","isActive","endDate","describe","beforeEach","clearAllMocks","mockResolvedValue","require","it","render","AppProvider","RecurringPage","expect","screen","getByText","toBeInTheDocument","waitFor","toHaveBeenCalled","mockRejectedValue","Error","monthlyLabels","getAllByText","length","toBeGreaterThan","activeLabels","user","userEvent","setup","toggleButtons","click","toHaveBeenCalledWith","mockSearchParams","key","spyOn","mockReturnValue","editButtons","timeout","deleteButtons","undefined","mockResolvedValueOnce","confirmButton","findByRole","mockRejectedValueOnce","closeButton","getByLabelText","queryByText","not","mockSearchParamsWithAdd","rerender"],"mappings":"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"}