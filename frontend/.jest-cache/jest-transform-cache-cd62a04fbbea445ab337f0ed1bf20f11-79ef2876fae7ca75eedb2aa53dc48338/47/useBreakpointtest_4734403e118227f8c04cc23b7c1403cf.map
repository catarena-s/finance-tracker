{"version":3,"sources":["E:\\my\\otus\\finance_tracker\\frontend\\__tests__\\hooks\\useBreakpoint.test.ts"],"sourcesContent":["/**\r\n * Unit tests — useBreakpoint\r\n * Тестирование хука для определения текущего размера экрана и брейкпоинта\r\n */\r\nimport { renderHook } from \"@testing-library/react\";\r\nimport { useBreakpoint } from \"@/hooks/useBreakpoint\";\r\nimport { useWindowSize } from \"@/hooks/useWindowSize\";\r\n\r\n// Мокаем useWindowSize\r\njest.mock(\"@/hooks/useWindowSize\");\r\n\r\nconst mockUseWindowSize = useWindowSize as jest.MockedFunction<\r\n  typeof useWindowSize\r\n>;\r\n\r\ndescribe(\"useBreakpoint\", () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe(\"isMobile flag\", () => {\r\n    it(\"should return isMobile=true for width < 640px\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 375, height: 667 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.isMobile).toBe(true);\r\n      expect(result.current.isTablet).toBe(false);\r\n      expect(result.current.isDesktop).toBe(false);\r\n    });\r\n\r\n    it(\"should return isMobile=false for width >= 640px\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 640, height: 800 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.isMobile).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe(\"isTablet flag\", () => {\r\n    it(\"should return isTablet=true for width >= 640px and < 1024px\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 768, height: 1024 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.isMobile).toBe(false);\r\n      expect(result.current.isTablet).toBe(true);\r\n      expect(result.current.isDesktop).toBe(false);\r\n    });\r\n\r\n    it(\"should return isTablet=false for width < 640px\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 500, height: 800 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.isTablet).toBe(false);\r\n    });\r\n\r\n    it(\"should return isTablet=false for width >= 1024px\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 1024, height: 768 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.isTablet).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe(\"isDesktop flag\", () => {\r\n    it(\"should return isDesktop=true for width >= 1024px\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 1280, height: 720 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.isMobile).toBe(false);\r\n      expect(result.current.isTablet).toBe(false);\r\n      expect(result.current.isDesktop).toBe(true);\r\n    });\r\n\r\n    it(\"should return isDesktop=false for width < 1024px\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 1023, height: 768 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.isDesktop).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe(\"currentBreakpoint\", () => {\r\n    it('should return \"xs\" for width < 640px', () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 320, height: 568 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.currentBreakpoint).toBe(\"xs\");\r\n    });\r\n\r\n    it('should return \"sm\" for width >= 640px and < 768px', () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 640, height: 800 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.currentBreakpoint).toBe(\"sm\");\r\n    });\r\n\r\n    it('should return \"md\" for width >= 768px and < 1024px', () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 768, height: 1024 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.currentBreakpoint).toBe(\"md\");\r\n    });\r\n\r\n    it('should return \"lg\" for width >= 1024px and < 1280px', () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 1024, height: 768 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.currentBreakpoint).toBe(\"lg\");\r\n    });\r\n\r\n    it('should return \"xl\" for width >= 1280px and < 1440px', () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 1280, height: 720 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.currentBreakpoint).toBe(\"xl\");\r\n    });\r\n\r\n    it('should return \"2xl\" for width >= 1440px', () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 1920, height: 1080 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.currentBreakpoint).toBe(\"2xl\");\r\n    });\r\n  });\r\n\r\n  describe(\"width property\", () => {\r\n    it(\"should return the current window width\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 1024, height: 768 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.width).toBe(1024);\r\n    });\r\n  });\r\n\r\n  describe(\"edge cases\", () => {\r\n    it(\"should handle width of 0 (SSR scenario)\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 0, height: 0 });\r\n\r\n      const { result } = renderHook(() => useBreakpoint());\r\n\r\n      expect(result.current.isMobile).toBe(true);\r\n      expect(result.current.currentBreakpoint).toBe(\"xs\");\r\n    });\r\n\r\n    it(\"should handle exact breakpoint boundaries\", () => {\r\n      // Тест на границе sm (640px)\r\n      mockUseWindowSize.mockReturnValue({ width: 639, height: 800 });\r\n      const { result: result1 } = renderHook(() => useBreakpoint());\r\n      expect(result1.current.isMobile).toBe(true);\r\n      expect(result1.current.currentBreakpoint).toBe(\"xs\");\r\n\r\n      mockUseWindowSize.mockReturnValue({ width: 640, height: 800 });\r\n      const { result: result2 } = renderHook(() => useBreakpoint());\r\n      expect(result2.current.isMobile).toBe(false);\r\n      expect(result2.current.isTablet).toBe(true);\r\n      expect(result2.current.currentBreakpoint).toBe(\"sm\");\r\n\r\n      // Тест на границе lg (1024px)\r\n      mockUseWindowSize.mockReturnValue({ width: 1023, height: 768 });\r\n      const { result: result3 } = renderHook(() => useBreakpoint());\r\n      expect(result3.current.isTablet).toBe(true);\r\n      expect(result3.current.isDesktop).toBe(false);\r\n\r\n      mockUseWindowSize.mockReturnValue({ width: 1024, height: 768 });\r\n      const { result: result4 } = renderHook(() => useBreakpoint());\r\n      expect(result4.current.isTablet).toBe(false);\r\n      expect(result4.current.isDesktop).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe(\"delay parameter\", () => {\r\n    it(\"should pass delay parameter to useWindowSize\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 1024, height: 768 });\r\n\r\n      renderHook(() => useBreakpoint(300));\r\n\r\n      expect(mockUseWindowSize).toHaveBeenCalledWith(300);\r\n    });\r\n\r\n    it(\"should use default delay when not provided\", () => {\r\n      mockUseWindowSize.mockReturnValue({ width: 1024, height: 768 });\r\n\r\n      renderHook(() => useBreakpoint());\r\n\r\n      expect(mockUseWindowSize).toHaveBeenCalledWith(undefined);\r\n    });\r\n  });\r\n});\r\n"],"names":["jest","mock","mockUseWindowSize","useWindowSize","describe","beforeEach","clearAllMocks","it","mockReturnValue","width","height","result","renderHook","useBreakpoint","expect","current","isMobile","toBe","isTablet","isDesktop","currentBreakpoint","result1","result2","result3","result4","toHaveBeenCalledWith","undefined"],"mappings":"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"}