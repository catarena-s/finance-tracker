{"version":3,"sources":["E:\\my\\otus\\finance_tracker\\frontend\\__tests__\\integration\\user-flows.test.tsx"],"sourcesContent":["/**\r\n * Integration Tests - User Flows\r\n * \r\n * Tests complete user workflows including:\r\n * - Creating, editing, and deleting transactions\r\n * - Creating, editing, and deleting categories\r\n * - Creating, editing, and deleting budgets\r\n * \r\n * Requirements: 14.6, 15.1, 15.2, 15.3, 15.4\r\n */\r\n\r\nimport React from 'react';\r\nimport { render, screen, waitFor } from '@testing-library/react';\r\nimport userEvent from '@testing-library/user-event';\r\nimport { AppProvider, useApp } from '@/contexts/AppContext';\r\nimport { transactionApi } from '@/services/api/transactions';\r\nimport { categoryApi } from '@/services/api/categories';\r\nimport { budgetApi } from '@/services/api/budgets';\r\n\r\n// Mock the API modules\r\njest.mock('@/services/api/transactions');\r\njest.mock('@/services/api/categories');\r\njest.mock('@/services/api/budgets');\r\njest.mock('@/services/api/analytics');\r\n\r\nconst mockTransactionApi = transactionApi as jest.Mocked<typeof transactionApi>;\r\nconst mockCategoryApi = categoryApi as jest.Mocked<typeof categoryApi>;\r\nconst mockBudgetApi = budgetApi as jest.Mocked<typeof budgetApi>;\r\n\r\n// Helper component to test context operations\r\nfunction TestComponent({ children }: { children: React.ReactNode }) {\r\n  return <AppProvider>{children}</AppProvider>;\r\n}\r\n\r\ndescribe('Integration Tests - User Flows', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('Transaction Management Flow', () => {\r\n    it('should create a transaction successfully', async () => {\r\n      const mockTransaction = {\r\n        id: 'txn-1',\r\n        type: 'expense' as const,\r\n        amount: 50.00,\r\n        currency: 'USD',\r\n        categoryId: 'cat-1',\r\n        description: 'Weekly groceries',\r\n        transactionDate: '2024-01-15',\r\n        isRecurring: false,\r\n        createdAt: '2024-01-15T00:00:00Z',\r\n        updatedAt: '2024-01-15T00:00:00Z',\r\n      };\r\n\r\n      mockTransactionApi.create.mockResolvedValue(mockTransaction);\r\n\r\n      function TestApp() {\r\n        const { createTransaction, transactions } = useApp();\r\n\r\n        return (\r\n          <div>\r\n            <div data-testid=\"count\">{transactions.length}</div>\r\n            <button\r\n              onClick={() =>\r\n                createTransaction({\r\n                  type: 'expense',\r\n                  amount: 50.00,\r\n                  currency: 'USD',\r\n                  categoryId: 'cat-1',\r\n                  description: 'Weekly groceries',\r\n                  transactionDate: '2024-01-15',\r\n                  isRecurring: false,\r\n                })\r\n              }\r\n            >\r\n              Create\r\n            </button>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const user = userEvent.setup();\r\n\r\n      render(\r\n        <TestComponent>\r\n          <TestApp />\r\n        </TestComponent>\r\n      );\r\n\r\n      await user.click(screen.getByText('Create'));\r\n\r\n      await waitFor(() => {\r\n        expect(mockTransactionApi.create).toHaveBeenCalled();\r\n        expect(screen.getByTestId('count')).toHaveTextContent('1');\r\n      });\r\n    });\r\n\r\n    it('should update a transaction successfully', async () => {\r\n      const mockTransaction = {\r\n        id: 'txn-1',\r\n        type: 'expense' as const,\r\n        amount: 50.00,\r\n        currency: 'USD',\r\n        categoryId: 'cat-1',\r\n        description: 'Original',\r\n        transactionDate: '2024-01-15',\r\n        isRecurring: false,\r\n        createdAt: '2024-01-15T00:00:00Z',\r\n        updatedAt: '2024-01-15T00:00:00Z',\r\n        category: {\r\n          id: 'cat-1',\r\n          name: 'Food',\r\n          color: '#FF5733',\r\n        },\r\n      };\r\n\r\n      const updatedTransaction = { ...mockTransaction, description: 'Updated' };\r\n\r\n      mockTransactionApi.getAll.mockResolvedValue({\r\n        data: [mockTransaction],\r\n        pagination: {\r\n          page: 1,\r\n          pageSize: 10,\r\n          totalPages: 1,\r\n          totalItems: 1,\r\n        },\r\n      });\r\n      mockTransactionApi.update.mockResolvedValue(updatedTransaction);\r\n\r\n      function TestApp() {\r\n        const { loadTransactions, updateTransaction, transactions } = useApp();\r\n\r\n        React.useEffect(() => {\r\n          loadTransactions();\r\n        }, []);\r\n\r\n        return (\r\n          <div>\r\n            <div data-testid=\"description\">\r\n              {transactions[0]?.description || 'none'}\r\n            </div>\r\n            <button onClick={() => updateTransaction('txn-1', { description: 'Updated' })}>\r\n              Update\r\n            </button>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const user = userEvent.setup();\r\n\r\n      render(\r\n        <TestComponent>\r\n          <TestApp />\r\n        </TestComponent>\r\n      );\r\n\r\n      await waitFor(() => {\r\n        expect(screen.getByTestId('description')).toHaveTextContent('Original');\r\n      });\r\n\r\n      await user.click(screen.getByText('Update'));\r\n\r\n      await waitFor(() => {\r\n        expect(mockTransactionApi.update).toHaveBeenCalledWith('txn-1', { description: 'Updated' });\r\n        expect(screen.getByTestId('description')).toHaveTextContent('Updated');\r\n      });\r\n    });\r\n\r\n    it('should delete a transaction successfully', async () => {\r\n      const mockTransaction = {\r\n        id: 'txn-1',\r\n        type: 'expense' as const,\r\n        amount: 50.00,\r\n        currency: 'USD',\r\n        categoryId: 'cat-1',\r\n        description: 'Test',\r\n        transactionDate: '2024-01-15',\r\n        isRecurring: false,\r\n        createdAt: '2024-01-15T00:00:00Z',\r\n        updatedAt: '2024-01-15T00:00:00Z',\r\n        category: {\r\n          id: 'cat-1',\r\n          name: 'Food',\r\n          color: '#FF5733',\r\n        },\r\n      };\r\n\r\n      mockTransactionApi.getAll.mockResolvedValue({\r\n        data: [mockTransaction],\r\n        pagination: {\r\n          page: 1,\r\n          pageSize: 10,\r\n          totalPages: 1,\r\n          totalItems: 1,\r\n        },\r\n      });\r\n      mockTransactionApi.delete.mockResolvedValue(undefined);\r\n\r\n      function TestApp() {\r\n        const { loadTransactions, deleteTransaction, transactions } = useApp();\r\n\r\n        React.useEffect(() => {\r\n          loadTransactions();\r\n        }, []);\r\n\r\n        return (\r\n          <div>\r\n            <div data-testid=\"count\">{transactions.length}</div>\r\n            <button onClick={() => deleteTransaction('txn-1')}>Delete</button>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const user = userEvent.setup();\r\n\r\n      render(\r\n        <TestComponent>\r\n          <TestApp />\r\n        </TestComponent>\r\n      );\r\n\r\n      await waitFor(() => {\r\n        expect(screen.getByTestId('count')).toHaveTextContent('1');\r\n      });\r\n\r\n      await user.click(screen.getByText('Delete'));\r\n\r\n      await waitFor(() => {\r\n        expect(mockTransactionApi.delete).toHaveBeenCalledWith('txn-1');\r\n        expect(screen.getByTestId('count')).toHaveTextContent('0');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Category Management Flow', () => {\r\n    it('should create a category successfully', async () => {\r\n      const mockCategory = {\r\n        id: 'cat-1',\r\n        name: 'Entertainment',\r\n        type: 'expense' as const,\r\n        color: '#3498db',\r\n        icon: 'ðŸŽ¬',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n      };\r\n\r\n      mockCategoryApi.create.mockResolvedValue(mockCategory);\r\n\r\n      function TestApp() {\r\n        const { createCategory, categories } = useApp();\r\n\r\n        return (\r\n          <div>\r\n            <div data-testid=\"count\">{categories.length}</div>\r\n            <button\r\n              onClick={() =>\r\n                createCategory({\r\n                  name: 'Entertainment',\r\n                  type: 'expense',\r\n                  color: '#3498db',\r\n                  icon: 'ðŸŽ¬',\r\n                })\r\n              }\r\n            >\r\n              Create\r\n            </button>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const user = userEvent.setup();\r\n\r\n      render(\r\n        <TestComponent>\r\n          <TestApp />\r\n        </TestComponent>\r\n      );\r\n\r\n      await user.click(screen.getByText('Create'));\r\n\r\n      await waitFor(() => {\r\n        expect(mockCategoryApi.create).toHaveBeenCalled();\r\n        expect(screen.getByTestId('count')).toHaveTextContent('1');\r\n      });\r\n    });\r\n\r\n    it('should delete a category successfully', async () => {\r\n      const mockCategory = {\r\n        id: 'cat-1',\r\n        name: 'Entertainment',\r\n        type: 'expense' as const,\r\n        color: '#3498db',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n      };\r\n\r\n      mockCategoryApi.getAll.mockResolvedValue([mockCategory]);\r\n      mockCategoryApi.delete.mockResolvedValue(undefined);\r\n\r\n      function TestApp() {\r\n        const { loadCategories, deleteCategory, categories } = useApp();\r\n\r\n        React.useEffect(() => {\r\n          loadCategories();\r\n        }, []);\r\n\r\n        return (\r\n          <div>\r\n            <div data-testid=\"count\">{categories.length}</div>\r\n            <button onClick={() => deleteCategory('cat-1')}>Delete</button>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const user = userEvent.setup();\r\n\r\n      render(\r\n        <TestComponent>\r\n          <TestApp />\r\n        </TestComponent>\r\n      );\r\n\r\n      await waitFor(() => {\r\n        expect(screen.getByTestId('count')).toHaveTextContent('1');\r\n      });\r\n\r\n      await user.click(screen.getByText('Delete'));\r\n\r\n      await waitFor(() => {\r\n        expect(mockCategoryApi.delete).toHaveBeenCalledWith('cat-1');\r\n        expect(screen.getByTestId('count')).toHaveTextContent('0');\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Budget Management Flow', () => {\r\n    it('should create a budget successfully', async () => {\r\n      const mockBudget = {\r\n        id: 'budget-1',\r\n        categoryId: 'cat-1',\r\n        amount: 500.00,\r\n        currency: 'RUB',\r\n        period: 'monthly' as const,\r\n        startDate: '2024-01-01',\r\n        endDate: '2024-01-31',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n      };\r\n\r\n      mockBudgetApi.create.mockResolvedValue(mockBudget);\r\n\r\n      function TestApp() {\r\n        const { createBudget, budgets } = useApp();\r\n\r\n        return (\r\n          <div>\r\n            <div data-testid=\"count\">{budgets.length}</div>\r\n            <button\r\n              onClick={() =>\r\n                createBudget({\r\n                  categoryId: 'cat-1',\r\n                  amount: 500.00,\r\n                  currency: 'RUB',\r\n                  period: 'monthly',\r\n                  startDate: '2024-01-01',\r\n                  endDate: '2024-01-31',\r\n                })\r\n              }\r\n            >\r\n              Create\r\n            </button>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const user = userEvent.setup();\r\n\r\n      render(\r\n        <TestComponent>\r\n          <TestApp />\r\n        </TestComponent>\r\n      );\r\n\r\n      await user.click(screen.getByText('Create'));\r\n\r\n      await waitFor(() => {\r\n        expect(mockBudgetApi.create).toHaveBeenCalled();\r\n        expect(screen.getByTestId('count')).toHaveTextContent('1');\r\n      });\r\n    });\r\n\r\n    it('should delete a budget successfully', async () => {\r\n      const mockBudget = {\r\n        id: 'budget-1',\r\n        categoryId: 'cat-1',\r\n        amount: 500.00,\r\n        currency: 'RUB',\r\n        period: 'monthly' as const,\r\n        startDate: '2024-01-01',\r\n        endDate: '2024-01-31',\r\n        createdAt: '2024-01-01T00:00:00Z',\r\n        updatedAt: '2024-01-01T00:00:00Z',\r\n        category: {\r\n          id: 'cat-1',\r\n          name: 'Food',\r\n          color: '#FF5733',\r\n        },\r\n        spent: 0,\r\n        remaining: 500.00,\r\n        percentageUsed: 0,\r\n      };\r\n\r\n      mockBudgetApi.getAll.mockResolvedValue([mockBudget]);\r\n      mockBudgetApi.delete.mockResolvedValue(undefined);\r\n\r\n      function TestApp() {\r\n        const { loadBudgets, deleteBudget, budgets } = useApp();\r\n\r\n        React.useEffect(() => {\r\n          loadBudgets();\r\n        }, []);\r\n\r\n        return (\r\n          <div>\r\n            <div data-testid=\"count\">{budgets.length}</div>\r\n            <button onClick={() => deleteBudget('budget-1')}>Delete</button>\r\n          </div>\r\n        );\r\n      }\r\n\r\n      const user = userEvent.setup();\r\n\r\n      render(\r\n        <TestComponent>\r\n          <TestApp />\r\n        </TestComponent>\r\n      );\r\n\r\n      await waitFor(() => {\r\n        expect(screen.getByTestId('count')).toHaveTextContent('1');\r\n      });\r\n\r\n      await user.click(screen.getByText('Delete'));\r\n\r\n      await waitFor(() => {\r\n        expect(mockBudgetApi.delete).toHaveBeenCalledWith('budget-1');\r\n        expect(screen.getByTestId('count')).toHaveTextContent('0');\r\n      });\r\n    });\r\n  });\r\n});\r\n"],"names":["jest","mock","mockTransactionApi","transactionApi","mockCategoryApi","categoryApi","mockBudgetApi","budgetApi","TestComponent","children","AppProvider","describe","beforeEach","clearAllMocks","it","mockTransaction","id","type","amount","currency","categoryId","description","transactionDate","isRecurring","createdAt","updatedAt","create","mockResolvedValue","TestApp","createTransaction","transactions","useApp","div","data-testid","length","button","onClick","user","userEvent","setup","render","click","screen","getByText","waitFor","expect","toHaveBeenCalled","getByTestId","toHaveTextContent","category","name","color","updatedTransaction","getAll","data","pagination","page","pageSize","totalPages","totalItems","update","loadTransactions","updateTransaction","React","useEffect","toHaveBeenCalledWith","delete","undefined","deleteTransaction","mockCategory","icon","createCategory","categories","loadCategories","deleteCategory","mockBudget","period","startDate","endDate","createBudget","budgets","spent","remaining","percentageUsed","loadBudgets","deleteBudget"],"mappings":"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"}