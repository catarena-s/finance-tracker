{"version":3,"names":["ExpenseChart","_chart","Chart","register","CategoryScale","LinearScale","PointElement","LineElement","Tooltip","Legend","Filler","data","loading","cov_vfa7umz0u","f","chartData","s","_react","useMemo","b","length","labels","datasets","map","item","date","label","amount","borderColor","_chartConfig","CHART_COLORS","destructive","backgroundColor","destructiveLight","fill","tension","borderWidth","pointRadius","pointHoverRadius","options","responsive","maintainAspectRatio","animation","chartAnimation","plugins","legend","display","position","color","text","usePointStyle","tooltip","mode","intersect","tooltipDefaults","titleColor","bodyColor","padding","cornerRadius","callbacks","context","dataset","value","parsed","y","formatCurrencyTooltip","scales","x","grid","ticks","maxTicksLimit","beginAtZero","chartGrid","callback","String","_jsxruntime","jsx","_card","Card","className","CardContent","jsxs","_reactchartjs2","Line"],"sources":["E:\\my\\otus\\finance_tracker\\frontend\\src\\components\\dashboard\\ExpenseChart.tsx"],"sourcesContent":["import React, { useMemo } from \"react\";\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Tooltip,\n  Legend,\n  Filler,\n  type ChartData,\n} from \"chart.js\";\nimport { Line } from \"react-chartjs-2\";\nimport { Card, CardContent } from \"@/components/ui/shadcn/card\";\nimport {\n  CHART_COLORS,\n  chartGrid,\n  chartAnimation,\n  tooltipDefaults,\n  formatCurrencyTooltip,\n} from \"@/lib/chartConfig\";\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Tooltip,\n  Legend,\n  Filler\n);\n\ninterface ExpenseChartProps {\n  data: Array<{ date: string; amount: number }>;\n  loading?: boolean;\n}\n\nexport function ExpenseChart({ data, loading }: ExpenseChartProps) {\n  const chartData = useMemo((): ChartData<\"line\", number[], string> => {\n    if (!data || data.length === 0) {\n      return { labels: [], datasets: [] };\n    }\n    return {\n      labels: data.map((item) => item.date),\n      datasets: [\n        {\n          label: \"Расходы\",\n          data: data.map((item) => item.amount),\n          borderColor: CHART_COLORS.destructive,\n          backgroundColor: CHART_COLORS.destructiveLight,\n          fill: true,\n          tension: 0.4,\n          borderWidth: 2,\n          pointRadius: 2,\n          pointHoverRadius: 4,\n        },\n      ],\n    };\n  }, [data]);\n\n  const options = useMemo(\n    () => ({\n      responsive: true,\n      maintainAspectRatio: false,\n      animation: chartAnimation,\n      plugins: {\n        legend: {\n          display: true,\n          position: \"top\" as const,\n          labels: { color: CHART_COLORS.text, usePointStyle: true },\n        },\n        tooltip: {\n          mode: \"index\" as const,\n          intersect: false,\n          backgroundColor: tooltipDefaults.backgroundColor,\n          titleColor: tooltipDefaults.titleColor,\n          bodyColor: tooltipDefaults.bodyColor,\n          borderColor: tooltipDefaults.borderColor,\n          borderWidth: tooltipDefaults.borderWidth,\n          padding: tooltipDefaults.padding,\n          cornerRadius: tooltipDefaults.cornerRadius,\n          callbacks: {\n            label: (context: {\n              dataset: { label?: string };\n              parsed: { y: number | null };\n            }) => {\n              const label = context.dataset.label || \"\";\n              const value = context.parsed.y;\n              return label && value != null\n                ? `${label}: ${formatCurrencyTooltip(value)}`\n                : label || \"\";\n            },\n          },\n        },\n      },\n      scales: {\n        x: {\n          grid: { display: false },\n          ticks: { color: CHART_COLORS.text, maxTicksLimit: 8 },\n        },\n        y: {\n          beginAtZero: true,\n          grid: chartGrid,\n          ticks: {\n            color: CHART_COLORS.text,\n            callback: (value: unknown): string =>\n              typeof value === \"number\"\n                ? formatCurrencyTooltip(value)\n                : String(value ?? \"\"),\n          },\n        },\n      },\n    }),\n    []\n  );\n\n  if (loading) {\n    return (\n      <Card className=\"rounded-2xl border border-border bg-card shadow-sm\">\n        <CardContent className=\"p-6 md:p-8\">\n          <div className=\"animate-pulse\">\n            <div className=\"mb-4 h-6 w-1/3 rounded bg-muted\" />\n            <div className=\"h-64 rounded-2xl bg-muted/50\" />\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!data || data.length === 0) {\n    return (\n      <Card className=\"rounded-2xl border border-border bg-card shadow-sm\">\n        <CardContent className=\"p-6 md:p-8\">\n          <h2 className=\"mb-4 text-lg font-semibold text-foreground\">Тренд расходов</h2>\n          <div className=\"flex h-64 items-center justify-center text-muted-foreground\">\n            Нет данных для отображения\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"rounded-2xl border border-border bg-card shadow-sm transition-shadow hover:shadow-md\">\n      <CardContent className=\"p-6 md:p-8\">\n        <h2 className=\"mb-4 text-lg font-semibold text-foreground\">Тренд расходов</h2>\n        <div className=\"h-[200px] sm:h-64 lg:h-80\">\n          <Line data={chartData} options={options} />\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}