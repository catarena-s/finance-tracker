c51e6636e9154df3262fbc92beabb75d
/**
 * Unit tests — CSVPreview
 * Рендер таблицы по строкам и маппингу колонок.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _CSVPreview = require("../../src/components/csv/CSVPreview");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const rows = [
    {
        amount: "100",
        date: "2024-01-01",
        type: "expense",
        category: "Food"
    },
    {
        amount: "50",
        date: "2024-01-02",
        type: "income",
        category: "Salary"
    }
];
const mapping = {
    amount: "amount",
    transactionDate: "date",
    type: "type",
    categoryName: "category"
};
describe("CSVPreview", ()=>{
    it("renders header and data rows", ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_CSVPreview.CSVPreview, {
            rows: rows,
            mapping: mapping
        }));
        expect(_react1.screen.getByText("amount")).toBeInTheDocument();
        expect(_react1.screen.getByText("date")).toBeInTheDocument();
        expect(_react1.screen.getByText("100")).toBeInTheDocument();
        expect(_react1.screen.getByText("Food")).toBeInTheDocument();
        expect(_react1.screen.getByText("Salary")).toBeInTheDocument();
    });
    it("shows message when no rows", ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_CSVPreview.CSVPreview, {
            rows: [],
            mapping: mapping
        }));
        expect(_react1.screen.getByText(/Нет данных для предпросмотра/)).toBeInTheDocument();
    });
    it("limits rows to maxRows", ()=>{
        const manyRows = Array.from({
            length: 15
        }, (_, i)=>({
                amount: String(i),
                date: "2024-01-01",
                type: "expense",
                category: "Cat"
            }));
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_CSVPreview.CSVPreview, {
            rows: manyRows,
            mapping: mapping,
            maxRows: 5
        }));
        expect(_react1.screen.getByText(/Показаны первые 5 из 15/)).toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6XFxteVxcb3R1c1xcZmluYW5jZV90cmFja2VyXFxmcm9udGVuZFxcX190ZXN0c19fXFxjb21wb25lbnRzXFxDU1ZQcmV2aWV3LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBVbml0IHRlc3RzIOKAlCBDU1ZQcmV2aWV3XHJcbiAqINCg0LXQvdC00LXRgCDRgtCw0LHQu9C40YbRiyDQv9C+INGB0YLRgNC+0LrQsNC8INC4INC80LDQv9C/0LjQvdCz0YMg0LrQvtC70L7QvdC+0LouXHJcbiAqL1xyXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuIH0gZnJvbSBcIkB0ZXN0aW5nLWxpYnJhcnkvcmVhY3RcIjtcclxuaW1wb3J0IHsgQ1NWUHJldmlldyB9IGZyb20gXCJAL2NvbXBvbmVudHMvY3N2L0NTVlByZXZpZXdcIjtcclxuXHJcbmNvbnN0IHJvd3MgPSBbXHJcbiAgeyBhbW91bnQ6IFwiMTAwXCIsIGRhdGU6IFwiMjAyNC0wMS0wMVwiLCB0eXBlOiBcImV4cGVuc2VcIiwgY2F0ZWdvcnk6IFwiRm9vZFwiIH0sXHJcbiAgeyBhbW91bnQ6IFwiNTBcIiwgZGF0ZTogXCIyMDI0LTAxLTAyXCIsIHR5cGU6IFwiaW5jb21lXCIsIGNhdGVnb3J5OiBcIlNhbGFyeVwiIH0sXHJcbl07XHJcbmNvbnN0IG1hcHBpbmcgPSB7XHJcbiAgYW1vdW50OiBcImFtb3VudFwiLFxyXG4gIHRyYW5zYWN0aW9uRGF0ZTogXCJkYXRlXCIsXHJcbiAgdHlwZTogXCJ0eXBlXCIsXHJcbiAgY2F0ZWdvcnlOYW1lOiBcImNhdGVnb3J5XCIsXHJcbn07XHJcblxyXG5kZXNjcmliZShcIkNTVlByZXZpZXdcIiwgKCkgPT4ge1xyXG4gIGl0KFwicmVuZGVycyBoZWFkZXIgYW5kIGRhdGEgcm93c1wiLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoPENTVlByZXZpZXcgcm93cz17cm93c30gbWFwcGluZz17bWFwcGluZ30gLz4pO1xyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJhbW91bnRcIikpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChcImRhdGVcIikpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChcIjEwMFwiKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KFwiRm9vZFwiKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KFwiU2FsYXJ5XCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gIH0pO1xyXG5cclxuICBpdChcInNob3dzIG1lc3NhZ2Ugd2hlbiBubyByb3dzXCIsICgpID0+IHtcclxuICAgIHJlbmRlcig8Q1NWUHJldmlldyByb3dzPXtbXX0gbWFwcGluZz17bWFwcGluZ30gLz4pO1xyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL9Cd0LXRgiDQtNCw0L3QvdGL0YUg0LTQu9GPINC/0YDQtdC00L/RgNC+0YHQvNC+0YLRgNCwLykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KFwibGltaXRzIHJvd3MgdG8gbWF4Um93c1wiLCAoKSA9PiB7XHJcbiAgICBjb25zdCBtYW55Um93cyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDE1IH0sIChfLCBpKSA9PiAoe1xyXG4gICAgICBhbW91bnQ6IFN0cmluZyhpKSxcclxuICAgICAgZGF0ZTogXCIyMDI0LTAxLTAxXCIsXHJcbiAgICAgIHR5cGU6IFwiZXhwZW5zZVwiLFxyXG4gICAgICBjYXRlZ29yeTogXCJDYXRcIixcclxuICAgIH0pKTtcclxuICAgIHJlbmRlcig8Q1NWUHJldmlldyByb3dzPXttYW55Um93c30gbWFwcGluZz17bWFwcGluZ30gbWF4Um93cz17NX0gLz4pO1xyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL9Cf0L7QutCw0LfQsNC90Ysg0L/QtdGA0LLRi9C1IDUg0LjQtyAxNS8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm5hbWVzIjpbInJvd3MiLCJhbW91bnQiLCJkYXRlIiwidHlwZSIsImNhdGVnb3J5IiwibWFwcGluZyIsInRyYW5zYWN0aW9uRGF0ZSIsImNhdGVnb3J5TmFtZSIsImRlc2NyaWJlIiwiaXQiLCJyZW5kZXIiLCJDU1ZQcmV2aWV3IiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJtYW55Um93cyIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwiU3RyaW5nIiwibWF4Um93cyJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDOzs7Ozs4REFDaUI7d0JBQ2E7NEJBQ0o7Ozs7OztBQUUzQixNQUFNQSxPQUFPO0lBQ1g7UUFBRUMsUUFBUTtRQUFPQyxNQUFNO1FBQWNDLE1BQU07UUFBV0MsVUFBVTtJQUFPO0lBQ3ZFO1FBQUVILFFBQVE7UUFBTUMsTUFBTTtRQUFjQyxNQUFNO1FBQVVDLFVBQVU7SUFBUztDQUN4RTtBQUNELE1BQU1DLFVBQVU7SUFDZEosUUFBUTtJQUNSSyxpQkFBaUI7SUFDakJILE1BQU07SUFDTkksY0FBYztBQUNoQjtBQUVBQyxTQUFTLGNBQWM7SUFDckJDLEdBQUcsZ0NBQWdDO1FBQ2pDQyxJQUFBQSxjQUFNLGdCQUFDLHFCQUFDQyxzQkFBVTtZQUFDWCxNQUFNQTtZQUFNSyxTQUFTQTs7UUFDeENPLE9BQU9DLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFdBQVdDLGlCQUFpQjtRQUNwREgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsU0FBU0MsaUJBQWlCO1FBQ2xESCxPQUFPQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxRQUFRQyxpQkFBaUI7UUFDakRILE9BQU9DLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFNBQVNDLGlCQUFpQjtRQUNsREgsT0FBT0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsV0FBV0MsaUJBQWlCO0lBQ3REO0lBRUFOLEdBQUcsOEJBQThCO1FBQy9CQyxJQUFBQSxjQUFNLGdCQUFDLHFCQUFDQyxzQkFBVTtZQUFDWCxNQUFNLEVBQUU7WUFBRUssU0FBU0E7O1FBQ3RDTyxPQUFPQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxpQ0FBaUNDLGlCQUFpQjtJQUM1RTtJQUVBTixHQUFHLDBCQUEwQjtRQUMzQixNQUFNTyxXQUFXQyxNQUFNQyxJQUFJLENBQUM7WUFBRUMsUUFBUTtRQUFHLEdBQUcsQ0FBQ0MsR0FBR0MsSUFBTyxDQUFBO2dCQUNyRHBCLFFBQVFxQixPQUFPRDtnQkFDZm5CLE1BQU07Z0JBQ05DLE1BQU07Z0JBQ05DLFVBQVU7WUFDWixDQUFBO1FBQ0FNLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNDLHNCQUFVO1lBQUNYLE1BQU1nQjtZQUFVWCxTQUFTQTtZQUFTa0IsU0FBUzs7UUFDOURYLE9BQU9DLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLDRCQUE0QkMsaUJBQWlCO0lBQ3ZFO0FBQ0YifQ==