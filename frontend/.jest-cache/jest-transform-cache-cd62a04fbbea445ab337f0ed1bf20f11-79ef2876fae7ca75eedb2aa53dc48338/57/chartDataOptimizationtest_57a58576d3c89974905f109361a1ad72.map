{"version":3,"sources":["E:\\my\\otus\\finance_tracker\\frontend\\__tests__\\lib\\chartDataOptimization.test.ts"],"sourcesContent":["/**\r\n * Unit tests for chart data optimization utilities\r\n * \r\n * Tests the sampling and aggregation functions for optimizing chart data points\r\n * on mobile devices.\r\n * \r\n * Требование 10.2: Оптимизация количества отрисовываемых точек данных\r\n */\r\n\r\nimport {\r\n  sampleDataPoints,\r\n  aggregateDataPoints,\r\n  optimizeChartData,\r\n  optimizeGenericData,\r\n  shouldOptimizeData,\r\n  type DataPoint,\r\n} from '@/lib/chartDataOptimization';\r\n\r\ndescribe('chartDataOptimization', () => {\r\n  describe('sampleDataPoints', () => {\r\n    it('should return original data when length is less than maxPoints', () => {\r\n      const data: DataPoint[] = [\r\n        { date: '2024-01-01', amount: 100 },\r\n        { date: '2024-01-02', amount: 150 },\r\n        { date: '2024-01-03', amount: 120 },\r\n      ];\r\n\r\n      const result = sampleDataPoints(data, 10);\r\n      expect(result).toEqual(data);\r\n      expect(result.length).toBe(3);\r\n    });\r\n\r\n    it('should return empty array when data is empty', () => {\r\n      const result = sampleDataPoints([], 10);\r\n      expect(result).toEqual([]);\r\n    });\r\n\r\n    it('should sample data points evenly when length exceeds maxPoints', () => {\r\n      const data: DataPoint[] = Array.from({ length: 100 }, (_, i) => ({\r\n        date: `2024-01-${String(i + 1).padStart(2, '0')}`,\r\n        amount: i * 10,\r\n      }));\r\n\r\n      const result = sampleDataPoints(data, 20);\r\n      \r\n      expect(result.length).toBe(20);\r\n      // Should include first point\r\n      expect(result[0]).toEqual(data[0]);\r\n      // Should include last point\r\n      expect(result[result.length - 1]).toEqual(data[data.length - 1]);\r\n    });\r\n\r\n    it('should maintain chronological order', () => {\r\n      const data: DataPoint[] = Array.from({ length: 50 }, (_, i) => ({\r\n        date: `2024-01-${String(i + 1).padStart(2, '0')}`,\r\n        amount: i * 10,\r\n      }));\r\n\r\n      const result = sampleDataPoints(data, 10);\r\n      \r\n      // Check that dates are in order\r\n      for (let i = 1; i < result.length; i++) {\r\n        expect(result[i].date >= result[i - 1].date).toBe(true);\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('aggregateDataPoints', () => {\r\n    it('should return original data when length is less than maxPoints', () => {\r\n      const data: DataPoint[] = [\r\n        { date: '2024-01-01', amount: 100 },\r\n        { date: '2024-01-02', amount: 150 },\r\n      ];\r\n\r\n      const result = aggregateDataPoints(data, 10);\r\n      expect(result).toEqual(data);\r\n    });\r\n\r\n    it('should aggregate data points by averaging', () => {\r\n      const data: DataPoint[] = [\r\n        { date: '2024-01-01', amount: 100 },\r\n        { date: '2024-01-02', amount: 200 },\r\n        { date: '2024-01-03', amount: 150 },\r\n        { date: '2024-01-04', amount: 250 },\r\n      ];\r\n\r\n      const result = aggregateDataPoints(data, 2);\r\n      \r\n      expect(result.length).toBe(2);\r\n      // First bucket: average of 100 and 200 = 150\r\n      expect(result[0].amount).toBe(150);\r\n      expect(result[0].date).toBe('2024-01-01');\r\n      // Second bucket: average of 150 and 250 = 200\r\n      expect(result[1].amount).toBe(200);\r\n      expect(result[1].date).toBe('2024-01-03');\r\n    });\r\n\r\n    it('should round aggregated amounts to 2 decimal places', () => {\r\n      const data: DataPoint[] = [\r\n        { date: '2024-01-01', amount: 100.333 },\r\n        { date: '2024-01-02', amount: 200.666 },\r\n        { date: '2024-01-03', amount: 150.111 },\r\n      ];\r\n\r\n      const result = aggregateDataPoints(data, 1);\r\n      \r\n      expect(result.length).toBe(1);\r\n      // Average: (100.333 + 200.666 + 150.111) / 3 = 150.37\r\n      expect(result[0].amount).toBe(150.37);\r\n    });\r\n  });\r\n\r\n  describe('optimizeChartData', () => {\r\n    it('should not optimize when data length is below threshold (50)', () => {\r\n      const data: DataPoint[] = Array.from({ length: 40 }, (_, i) => ({\r\n        date: `2024-01-${String(i + 1).padStart(2, '0')}`,\r\n        amount: i * 10,\r\n      }));\r\n\r\n      const result = optimizeChartData(data, true, false);\r\n      expect(result).toEqual(data);\r\n      expect(result.length).toBe(40);\r\n    });\r\n\r\n    it('should optimize to 20 points on mobile when data exceeds threshold', () => {\r\n      const data: DataPoint[] = Array.from({ length: 100 }, (_, i) => ({\r\n        date: `2024-01-${String(i + 1).padStart(2, '0')}`,\r\n        amount: i * 10,\r\n      }));\r\n\r\n      const result = optimizeChartData(data, true, false); // isMobile = true\r\n      expect(result.length).toBe(20);\r\n    });\r\n\r\n    it('should optimize to 40 points on tablet when data exceeds threshold', () => {\r\n      const data: DataPoint[] = Array.from({ length: 100 }, (_, i) => ({\r\n        date: `2024-01-${String(i + 1).padStart(2, '0')}`,\r\n        amount: i * 10,\r\n      }));\r\n\r\n      const result = optimizeChartData(data, false, true); // isTablet = true\r\n      expect(result.length).toBe(40);\r\n    });\r\n\r\n    it('should not optimize on desktop when data is below 100 points', () => {\r\n      const data: DataPoint[] = Array.from({ length: 80 }, (_, i) => ({\r\n        date: `2024-01-${String(i + 1).padStart(2, '0')}`,\r\n        amount: i * 10,\r\n      }));\r\n\r\n      const result = optimizeChartData(data, false, false); // desktop\r\n      expect(result).toEqual(data);\r\n      expect(result.length).toBe(80);\r\n    });\r\n\r\n    it('should use aggregation when useAggregation is true', () => {\r\n      const data: DataPoint[] = Array.from({ length: 100 }, (_, i) => ({\r\n        date: `2024-01-${String(i + 1).padStart(2, '0')}`,\r\n        amount: i * 10,\r\n      }));\r\n\r\n      const sampledResult = optimizeChartData(data, true, false, false);\r\n      const aggregatedResult = optimizeChartData(data, true, false, true);\r\n      \r\n      // Both should have same length\r\n      expect(sampledResult.length).toBe(20);\r\n      expect(aggregatedResult.length).toBe(20);\r\n      \r\n      // But different values (aggregation averages, sampling picks specific points)\r\n      expect(sampledResult[1].amount).not.toBe(aggregatedResult[1].amount);\r\n    });\r\n  });\r\n\r\n  describe('optimizeGenericData', () => {\r\n    interface TestCategory {\r\n      name: string;\r\n      value: number;\r\n    }\r\n\r\n    it('should optimize generic data structures', () => {\r\n      const data: TestCategory[] = Array.from({ length: 100 }, (_, i) => ({\r\n        name: `Category ${i}`,\r\n        value: i * 10,\r\n      }));\r\n\r\n      const result = optimizeGenericData(data, true, false); // mobile\r\n      expect(result.length).toBe(20);\r\n      expect(result[0].name).toBe('Category 0');\r\n      expect(result[result.length - 1].name).toBe('Category 99');\r\n    });\r\n\r\n    it('should not optimize when data is below threshold', () => {\r\n      const data: TestCategory[] = Array.from({ length: 30 }, (_, i) => ({\r\n        name: `Category ${i}`,\r\n        value: i * 10,\r\n      }));\r\n\r\n      const result = optimizeGenericData(data, true, false);\r\n      expect(result).toEqual(data);\r\n    });\r\n\r\n    it('should work with different data types', () => {\r\n      interface ComplexData {\r\n        id: string;\r\n        nested: { value: number };\r\n        array: number[];\r\n      }\r\n\r\n      const data: ComplexData[] = Array.from({ length: 100 }, (_, i) => ({\r\n        id: `id-${i}`,\r\n        nested: { value: i },\r\n        array: [i, i * 2],\r\n      }));\r\n\r\n      const result = optimizeGenericData(data, true, false);\r\n      expect(result.length).toBe(20);\r\n      expect(result[0].id).toBe('id-0');\r\n      expect(result[0].nested.value).toBe(0);\r\n    });\r\n  });\r\n\r\n  describe('shouldOptimizeData', () => {\r\n    it('should return false when data length is below threshold', () => {\r\n      expect(shouldOptimizeData(30, true, false)).toBe(false);\r\n      expect(shouldOptimizeData(50, true, false)).toBe(false);\r\n    });\r\n\r\n    it('should return true on mobile when data exceeds mobile max (20)', () => {\r\n      expect(shouldOptimizeData(60, true, false)).toBe(true);\r\n      expect(shouldOptimizeData(100, true, false)).toBe(true);\r\n    });\r\n\r\n    it('should return true on tablet when data exceeds tablet max (40)', () => {\r\n      expect(shouldOptimizeData(60, false, true)).toBe(true);\r\n      expect(shouldOptimizeData(100, false, true)).toBe(true);\r\n    });\r\n\r\n    it('should return false on tablet when data is below tablet max', () => {\r\n      // 55 points is above threshold (50) but above tablet max (40), so it should optimize\r\n      expect(shouldOptimizeData(55, false, true)).toBe(true);\r\n      // 35 points is below threshold, so no optimization\r\n      expect(shouldOptimizeData(35, false, true)).toBe(false);\r\n    });\r\n\r\n    it('should return true on desktop when data exceeds desktop max (100)', () => {\r\n      expect(shouldOptimizeData(150, false, false)).toBe(true);\r\n    });\r\n\r\n    it('should return false on desktop when data is below desktop max', () => {\r\n      expect(shouldOptimizeData(80, false, false)).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('edge cases', () => {\r\n    it('should handle null/undefined data gracefully', () => {\r\n      expect(sampleDataPoints(null as any, 10)).toEqual(null);\r\n      expect(aggregateDataPoints(undefined as any, 10)).toEqual(undefined);\r\n      expect(optimizeChartData(null as any, true, false)).toEqual(null);\r\n    });\r\n\r\n    it('should handle single data point', () => {\r\n      const data: DataPoint[] = [{ date: '2024-01-01', amount: 100 }];\r\n      \r\n      expect(sampleDataPoints(data, 10)).toEqual(data);\r\n      expect(aggregateDataPoints(data, 10)).toEqual(data);\r\n      expect(optimizeChartData(data, true, false)).toEqual(data);\r\n    });\r\n\r\n    it('should handle maxPoints of 2', () => {\r\n      const data: DataPoint[] = [\r\n        { date: '2024-01-01', amount: 100 },\r\n        { date: '2024-01-02', amount: 200 },\r\n        { date: '2024-01-03', amount: 300 },\r\n      ];\r\n\r\n      const result = sampleDataPoints(data, 2);\r\n      expect(result.length).toBe(2);\r\n      // Should include first and last\r\n      expect(result[0]).toEqual(data[0]);\r\n      expect(result[1]).toEqual(data[2]);\r\n    });\r\n\r\n    it('should handle data with negative amounts', () => {\r\n      const data: DataPoint[] = [\r\n        { date: '2024-01-01', amount: -100 },\r\n        { date: '2024-01-02', amount: -200 },\r\n        { date: '2024-01-03', amount: 150 },\r\n        { date: '2024-01-04', amount: -50 },\r\n      ];\r\n\r\n      const result = aggregateDataPoints(data, 2);\r\n      expect(result.length).toBe(2);\r\n      // First bucket: (-100 + -200) / 2 = -150\r\n      expect(result[0].amount).toBe(-150);\r\n    });\r\n\r\n    it('should handle data with zero amounts', () => {\r\n      const data: DataPoint[] = Array.from({ length: 100 }, (_, i) => ({\r\n        date: `2024-01-${String(i + 1).padStart(2, '0')}`,\r\n        amount: 0,\r\n      }));\r\n\r\n      const result = optimizeChartData(data, true, false);\r\n      expect(result.length).toBe(20);\r\n      expect(result.every(point => point.amount === 0)).toBe(true);\r\n    });\r\n  });\r\n});\r\n"],"names":["describe","it","data","date","amount","result","sampleDataPoints","expect","toEqual","length","toBe","Array","from","_","i","String","padStart","aggregateDataPoints","optimizeChartData","sampledResult","aggregatedResult","not","name","value","optimizeGenericData","id","nested","array","shouldOptimizeData","undefined","every","point"],"mappings":"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"}