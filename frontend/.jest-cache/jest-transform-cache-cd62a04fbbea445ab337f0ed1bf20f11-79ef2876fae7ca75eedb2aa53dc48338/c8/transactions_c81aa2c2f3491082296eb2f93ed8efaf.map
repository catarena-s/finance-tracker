{"version":3,"names":["cov_18lap9kwin","actualCoverage","s","transactionApi","getAll","filters","b","f","params","URLSearchParams","page","append","toString","pageSize","type","categoryId","startDate","endDate","response","_client","apiClient","get","d","data","items","pagination","page_size","totalPages","pages","totalItems","total","getById","id","create","post","update","put","delete"],"sources":["E:\\my\\otus\\finance_tracker\\frontend\\src\\services\\api\\transactions.ts"],"sourcesContent":["import { apiClient } from \"./client\";\nimport {\n  Transaction,\n  TransactionWithCategory,\n  TransactionType,\n  ApiResponse,\n  PaginatedResponse,\n} from \"@/types/api\";\n\nexport interface TransactionFilters {\n  page?: number;\n  pageSize?: number;\n  type?: TransactionType;\n  categoryId?: string;\n  startDate?: string;\n  endDate?: string;\n}\n\nexport interface CreateTransactionData {\n  type: TransactionType;\n  amount: number;\n  currency: string;\n  categoryId: string;\n  description: string;\n  transactionDate: string;\n  isRecurring?: boolean;\n}\n\nexport interface UpdateTransactionData {\n  type?: TransactionType;\n  amount?: number;\n  currency?: string;\n  categoryId?: string;\n  description?: string;\n  transactionDate?: string;\n  isRecurring?: boolean;\n}\n\n// Backend response (camelCase after interceptor; page_size for fallback)\ninterface BackendPaginatedResponse<T> {\n  items: T[];\n  total: number;\n  page: number;\n  pageSize?: number;\n  page_size?: number;\n  pages: number;\n}\n\n/**\n * Transaction API клиент\n */\nexport const transactionApi = {\n  async getAll(\n    filters: TransactionFilters = {}\n  ): Promise<PaginatedResponse<TransactionWithCategory>> {\n    const params = new URLSearchParams();\n\n    if (filters.page) params.append(\"page\", filters.page.toString());\n    if (filters.pageSize) params.append(\"page_size\", filters.pageSize.toString());\n    if (filters.type) params.append(\"type\", filters.type);\n    if (filters.categoryId) params.append(\"category_id\", filters.categoryId);\n    if (filters.startDate) params.append(\"start_date\", filters.startDate);\n    if (filters.endDate) params.append(\"end_date\", filters.endDate);\n\n    const response = await apiClient.get<\n      BackendPaginatedResponse<TransactionWithCategory>\n    >(`/transactions?${params.toString()}`);\n\n    const d = response.data;\n    return {\n      data: d.items ?? [],\n      pagination: {\n        page: d.page ?? 1,\n        pageSize: d.pageSize ?? d.page_size ?? 10,\n        totalPages: d.pages ?? 1,\n        totalItems: d.total ?? 0,\n      },\n    };\n  },\n\n  async getById(id: string): Promise<TransactionWithCategory> {\n    const response = await apiClient.get<TransactionWithCategory>(\n      `/transactions/${id}`\n    );\n    return response.data;\n  },\n\n  async create(data: CreateTransactionData): Promise<Transaction> {\n    const response = await apiClient.post<Transaction>(\"/transactions\", data);\n    return response.data;\n  },\n\n  async update(id: string, data: UpdateTransactionData): Promise<Transaction> {\n    const response = await apiClient.put<Transaction>(`/transactions/${id}`, data);\n    return response.data;\n  },\n\n  async delete(id: string): Promise<void> {\n    await apiClient.delete(`/transactions/${id}`);\n  },\n};\n"],"mappings":"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","ignoreList":[]}