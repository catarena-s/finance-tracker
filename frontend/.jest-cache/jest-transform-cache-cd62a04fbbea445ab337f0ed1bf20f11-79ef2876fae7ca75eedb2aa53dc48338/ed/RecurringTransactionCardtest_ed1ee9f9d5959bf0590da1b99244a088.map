{"version":3,"sources":["E:\\my\\otus\\finance_tracker\\frontend\\__tests__\\components\\RecurringTransactionCard.test.tsx"],"sourcesContent":["/**\r\n * Unit tests — RecurringTransactionCard\r\n * Рендер карточки и вызовы onEdit, onDelete, onToggleActive.\r\n */\r\nimport React from \"react\";\r\nimport { render, screen } from \"@testing-library/react\";\r\nimport userEvent from \"@testing-library/user-event\";\r\nimport { RecurringTransactionCard } from \"@/components/recurring/RecurringTransactionCard\";\r\n\r\nconst mockItem = {\r\n  id: \"rec-1\",\r\n  name: \"Подписка\",\r\n  amount: 10,\r\n  currency: \"USD\",\r\n  categoryId: \"cat-1\",\r\n  type: \"expense\" as const,\r\n  frequency: \"monthly\" as const,\r\n  interval: 1,\r\n  startDate: \"2024-01-01\",\r\n  nextOccurrence: \"2024-02-01\",\r\n  isActive: true,\r\n  createdAt: \"2024-01-01T00:00:00Z\",\r\n  updatedAt: \"2024-01-01T00:00:00Z\",\r\n};\r\n\r\ndescribe(\"RecurringTransactionCard\", () => {\r\n  it(\"renders name, amount and frequency\", () => {\r\n    const onEdit = jest.fn();\r\n    const onDelete = jest.fn();\r\n    const onToggle = jest.fn();\r\n    render(\r\n      <RecurringTransactionCard\r\n        item={mockItem}\r\n        onEdit={onEdit}\r\n        onDelete={onDelete}\r\n        onToggleActive={onToggle}\r\n      />\r\n    );\r\n    expect(screen.getByText(\"Подписка\")).toBeInTheDocument();\r\n    expect(screen.getByText(/Ежемесячно/)).toBeInTheDocument();\r\n    expect(screen.getByText(/Расход/)).toBeInTheDocument();\r\n    expect(screen.getByText(/Активен/)).toBeInTheDocument();\r\n  });\r\n\r\n  it(\"calls onToggleActive when toggle button clicked\", async () => {\r\n    const onToggle = jest.fn();\r\n    render(\r\n      <RecurringTransactionCard\r\n        item={mockItem}\r\n        onEdit={jest.fn()}\r\n        onDelete={jest.fn()}\r\n        onToggleActive={onToggle}\r\n      />\r\n    );\r\n    await userEvent.click(screen.getByText(\"Отключить\"));\r\n    expect(onToggle).toHaveBeenCalledWith(\"rec-1\", false);\r\n  });\r\n\r\n  it(\"calls onEdit when edit button clicked\", async () => {\r\n    const onEdit = jest.fn();\r\n    render(\r\n      <RecurringTransactionCard\r\n        item={mockItem}\r\n        onEdit={onEdit}\r\n        onDelete={jest.fn()}\r\n        onToggleActive={jest.fn()}\r\n      />\r\n    );\r\n    await userEvent.click(screen.getByText(\"Изменить\"));\r\n    expect(onEdit).toHaveBeenCalledWith(mockItem);\r\n  });\r\n\r\n  it(\"calls onDelete when delete button clicked\", async () => {\r\n    const onDelete = jest.fn();\r\n    render(\r\n      <RecurringTransactionCard\r\n        item={mockItem}\r\n        onEdit={jest.fn()}\r\n        onDelete={onDelete}\r\n        onToggleActive={jest.fn()}\r\n      />\r\n    );\r\n    await userEvent.click(screen.getByText(\"Удалить\"));\r\n    expect(onDelete).toHaveBeenCalledWith(\"rec-1\");\r\n  });\r\n});\r\n"],"names":["mockItem","id","name","amount","currency","categoryId","type","frequency","interval","startDate","nextOccurrence","isActive","createdAt","updatedAt","describe","it","onEdit","jest","fn","onDelete","onToggle","render","RecurringTransactionCard","item","onToggleActive","expect","screen","getByText","toBeInTheDocument","userEvent","click","toHaveBeenCalledWith"],"mappings":"AAAA;;;CAGC;;;;;8DACiB;wBACa;kEACT;0CACmB;;;;;;AAEzC,MAAMA,WAAW;IACfC,IAAI;IACJC,MAAM;IACNC,QAAQ;IACRC,UAAU;IACVC,YAAY;IACZC,MAAM;IACNC,WAAW;IACXC,UAAU;IACVC,WAAW;IACXC,gBAAgB;IAChBC,UAAU;IACVC,WAAW;IACXC,WAAW;AACb;AAEAC,SAAS,4BAA4B;IACnCC,GAAG,sCAAsC;QACvC,MAAMC,SAASC,KAAKC,EAAE;QACtB,MAAMC,WAAWF,KAAKC,EAAE;QACxB,MAAME,WAAWH,KAAKC,EAAE;QACxBG,IAAAA,cAAM,gBACJ,qBAACC,kDAAwB;YACvBC,MAAMvB;YACNgB,QAAQA;YACRG,UAAUA;YACVK,gBAAgBJ;;QAGpBK,OAAOC,cAAM,CAACC,SAAS,CAAC,aAAaC,iBAAiB;QACtDH,OAAOC,cAAM,CAACC,SAAS,CAAC,eAAeC,iBAAiB;QACxDH,OAAOC,cAAM,CAACC,SAAS,CAAC,WAAWC,iBAAiB;QACpDH,OAAOC,cAAM,CAACC,SAAS,CAAC,YAAYC,iBAAiB;IACvD;IAEAb,GAAG,mDAAmD;QACpD,MAAMK,WAAWH,KAAKC,EAAE;QACxBG,IAAAA,cAAM,gBACJ,qBAACC,kDAAwB;YACvBC,MAAMvB;YACNgB,QAAQC,KAAKC,EAAE;YACfC,UAAUF,KAAKC,EAAE;YACjBM,gBAAgBJ;;QAGpB,MAAMS,kBAAS,CAACC,KAAK,CAACJ,cAAM,CAACC,SAAS,CAAC;QACvCF,OAAOL,UAAUW,oBAAoB,CAAC,SAAS;IACjD;IAEAhB,GAAG,yCAAyC;QAC1C,MAAMC,SAASC,KAAKC,EAAE;QACtBG,IAAAA,cAAM,gBACJ,qBAACC,kDAAwB;YACvBC,MAAMvB;YACNgB,QAAQA;YACRG,UAAUF,KAAKC,EAAE;YACjBM,gBAAgBP,KAAKC,EAAE;;QAG3B,MAAMW,kBAAS,CAACC,KAAK,CAACJ,cAAM,CAACC,SAAS,CAAC;QACvCF,OAAOT,QAAQe,oBAAoB,CAAC/B;IACtC;IAEAe,GAAG,6CAA6C;QAC9C,MAAMI,WAAWF,KAAKC,EAAE;QACxBG,IAAAA,cAAM,gBACJ,qBAACC,kDAAwB;YACvBC,MAAMvB;YACNgB,QAAQC,KAAKC,EAAE;YACfC,UAAUA;YACVK,gBAAgBP,KAAKC,EAAE;;QAG3B,MAAMW,kBAAS,CAACC,KAAK,CAACJ,cAAM,CAACC,SAAS,CAAC;QACvCF,OAAON,UAAUY,oBAAoB,CAAC;IACxC;AACF"}