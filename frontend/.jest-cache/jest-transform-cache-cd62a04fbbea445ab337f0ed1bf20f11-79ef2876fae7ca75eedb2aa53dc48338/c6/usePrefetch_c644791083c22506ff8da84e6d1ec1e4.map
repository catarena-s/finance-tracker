{"version":3,"names":["cov_1uecz212vi","actualCoverage","s","usePrefetch","currentPage","totalPages","fetchFn","f","prefetchedPages","_react","useRef","Set","useEffect","nextPage","b","current","has","timer","setTimeout","then","add","catch","clearTimeout"],"sources":["E:\\my\\otus\\finance_tracker\\frontend\\src\\hooks\\usePrefetch.ts"],"sourcesContent":["import { useEffect, useRef } from \"react\";\n\n/**\n * Хук для предзагрузки данных следующей страницы\n */\nexport function usePrefetch<T>(\n  currentPage: number,\n  totalPages: number,\n  fetchFn: (page: number) => Promise<T>\n) {\n  const prefetchedPages = useRef<Set<number>>(new Set());\n\n  useEffect(() => {\n    const nextPage = currentPage + 1;\n\n    // Предзагружаем следующую страницу, если она существует и еще не загружена\n    if (nextPage <= totalPages && !prefetchedPages.current.has(nextPage)) {\n      const timer = setTimeout(() => {\n        fetchFn(nextPage)\n          .then(() => {\n            prefetchedPages.current.add(nextPage);\n          })\n          .catch(() => {\n            // Игнорируем ошибки предзагрузки\n          });\n      }, 500); // Задержка для избежания лишних запросов\n\n      return () => clearTimeout(timer);\n    }\n  }, [currentPage, totalPages, fetchFn]);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeI;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;;;+BAVY;;;;;;WAAAC,WAAA;;;;;kCALkB;AAK3B,SAASA,YACdC,WAAmB,EACnBC,UAAkB,EAClBC,OAAqC;EAAA;EAAAN,cAAA,GAAAO,CAAA;EAErC,MAAMC,eAAA;EAAA;EAAA,CAAAR,cAAA,GAAAE,CAAA,OAAkB,IAAAO,MAAA,CAAAC,MAAM,EAAc,IAAIC,GAAA;EAAA;EAAAX,cAAA,GAAAE,CAAA;EAEhD,IAAAO,MAAA,CAAAG,SAAS,EAAC;IAAA;IAAAZ,cAAA,GAAAO,CAAA;IACR,MAAMM,QAAA;IAAA;IAAA,CAAAb,cAAA,GAAAE,CAAA,OAAWE,WAAA,GAAc;IAE/B;IAAA;IAAAJ,cAAA,GAAAE,CAAA;IACA;IAAI;IAAA,CAAAF,cAAA,GAAAc,CAAA,UAAAD,QAAA,IAAYR,UAAA;IAAA;IAAA,CAAAL,cAAA,GAAAc,CAAA,UAAc,CAACN,eAAA,CAAgBO,OAAO,CAACC,GAAG,CAACH,QAAA,IAAW;MAAA;MAAAb,cAAA,GAAAc,CAAA;MACpE,MAAMG,KAAA;MAAA;MAAA,CAAAjB,cAAA,GAAAE,CAAA,OAAQgB,UAAA,CAAW;QAAA;QAAAlB,cAAA,GAAAO,CAAA;QAAAP,cAAA,GAAAE,CAAA;QACvBI,OAAA,CAAQO,QAAA,EACLM,IAAI,CAAC;UAAA;UAAAnB,cAAA,GAAAO,CAAA;UAAAP,cAAA,GAAAE,CAAA;UACJM,eAAA,CAAgBO,OAAO,CAACK,GAAG,CAACP,QAAA;QAC9B,GACCQ,KAAK,CAAC;UAAA;UAAArB,cAAA,GAAAO,CAAA;QAEP,EADE;QACF;MACJ,GAAG,OAAM;MAAA;MAAAP,cAAA,GAAAE,CAAA;MAET,OAAO,MAAM;QAAA;QAAAF,cAAA,GAAAO,CAAA;QAAAP,cAAA,GAAAE,CAAA;QAAA,OAAAoB,YAAA,CAAaL,KAAA;MAAA;IAC5B;IAAA;IAAA;MAAAjB,cAAA,GAAAc,CAAA;IAAA;EACF,GAAG,CAACV,WAAA,EAAaC,UAAA,EAAYC,OAAA,CAAQ;AACvC","ignoreList":[]}