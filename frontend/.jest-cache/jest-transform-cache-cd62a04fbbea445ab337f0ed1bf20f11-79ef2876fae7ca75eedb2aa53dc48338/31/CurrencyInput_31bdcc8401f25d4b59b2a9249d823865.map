{"version":3,"names":["CurrencyInput","cov_196qzb77jw","s","_react","forwardRef","label","error","helperText","value","onChange","currency","b","disabled","required","id","placeholder","ref","f","displayValue","setDisplayValue","useState","useEffect","undefined","numValue","parseFloat","isNaN","toFixed","handleChange","e","inputValue","target","regex","test","handleBlur","currencySymbols","USD","EUR","GBP","RUB","symbol","_jsxruntime","jsxs","className","jsx","_Input","Input","type","onBlur","inputMode","displayName"],"sources":["E:\\my\\otus\\finance_tracker\\frontend\\src\\components\\ui\\CurrencyInput.tsx"],"sourcesContent":["import React, { forwardRef, useState, useEffect } from \"react\";\nimport { Input } from \"./Input\";\n\ninterface CurrencyInputProps {\n  label?: string;\n  error?: string;\n  helperText?: string;\n  value?: number | string;\n  onChange?: (value: number) => void;\n  currency?: string;\n  disabled?: boolean;\n  required?: boolean;\n  id?: string;\n  placeholder?: string;\n}\n\nexport const CurrencyInput = forwardRef<HTMLInputElement, CurrencyInputProps>(\n  (\n    {\n      label,\n      error,\n      helperText,\n      value,\n      onChange,\n      currency = \"RUB\",\n      disabled,\n      required,\n      id,\n      placeholder = \"0.00\",\n    },\n    ref\n  ) => {\n    const [displayValue, setDisplayValue] = useState(\"\");\n\n    useEffect(() => {\n      if (value !== undefined && value !== \"\") {\n        const numValue = typeof value === \"string\" ? parseFloat(value) : value;\n        if (!isNaN(numValue)) {\n          setDisplayValue(numValue.toFixed(2));\n        }\n      } else {\n        setDisplayValue(\"\");\n      }\n    }, [value]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      const inputValue = e.target.value;\n\n      // Allow empty value\n      if (inputValue === \"\") {\n        setDisplayValue(\"\");\n        onChange?.(0);\n        return;\n      }\n\n      // Allow only numbers and one decimal point\n      const regex = /^\\d*\\.?\\d{0,2}$/;\n      if (regex.test(inputValue)) {\n        setDisplayValue(inputValue);\n        const numValue = parseFloat(inputValue);\n        if (!isNaN(numValue)) {\n          onChange?.(numValue);\n        }\n      }\n    };\n\n    const handleBlur = () => {\n      if (displayValue && displayValue !== \"\") {\n        const numValue = parseFloat(displayValue);\n        if (!isNaN(numValue)) {\n          setDisplayValue(numValue.toFixed(2));\n        }\n      }\n    };\n\n    const currencySymbols: Record<string, string> = {\n      USD: \"$\",\n      EUR: \"€\",\n      GBP: \"£\",\n      RUB: \"₽\",\n    };\n\n    const symbol = currencySymbols[currency] || currency;\n\n    return (\n      <div className=\"relative\">\n        <Input\n          ref={ref}\n          id={id}\n          type=\"text\"\n          label={label}\n          error={error}\n          helperText={helperText}\n          value={displayValue}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          disabled={disabled}\n          required={required}\n          placeholder={placeholder}\n          inputMode=\"decimal\"\n          className=\"pl-8\"\n        />\n        <span\n          className={`absolute left-3 text-muted-foreground pointer-events-none ${\n            label ? \"top-[2.125rem]\" : \"top-[0.625rem]\"\n          }`}\n        >\n          {symbol}\n        </span>\n      </div>\n    );\n  }\n);\n\nCurrencyInput.displayName = \"CurrencyInput\";\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}