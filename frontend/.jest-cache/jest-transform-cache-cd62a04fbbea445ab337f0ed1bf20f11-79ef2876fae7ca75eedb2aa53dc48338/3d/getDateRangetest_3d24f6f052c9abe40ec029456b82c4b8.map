{"version":3,"sources":["E:\\my\\otus\\finance_tracker\\frontend\\__tests__\\dashboard\\getDateRange.test.ts"],"sourcesContent":["/**\r\n * Unit tests — getDateRange (Dashboard)\r\n * Проверка вычисления диапазона дат по периоду.\r\n */\r\nimport { getDateRange } from \"@/utils/dateRange\";\r\n\r\ndescribe(\"getDateRange\", () => {\r\n  beforeAll(() => {\r\n    // Фиксируем дату для предсказуемых тестов\r\n    jest.useFakeTimers();\r\n    jest.setSystemTime(new Date(\"2025-02-20\"));\r\n  });\r\n\r\n  afterAll(() => {\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  it(\"returns start and end in YYYY-MM-DD format\", () => {\r\n    const { start, end } = getDateRange(\"month\");\r\n    expect(start).toMatch(/^\\d{4}-\\d{2}-\\d{2}$/);\r\n    expect(end).toMatch(/^\\d{4}-\\d{2}-\\d{2}$/);\r\n  });\r\n\r\n  it(\"end is today\", () => {\r\n    const { end } = getDateRange(\"month\");\r\n    expect(end).toBe(\"2025-02-20\");\r\n  });\r\n\r\n  it(\"month period gives 30 days back\", () => {\r\n    const { start } = getDateRange(\"month\");\r\n    const startDate = new Date(start);\r\n    const endDate = new Date(\"2025-02-20\");\r\n    const diffDays = Math.round((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\r\n    expect(diffDays).toBe(30);\r\n  });\r\n\r\n  it(\"day period gives 7 days back (last 7 days for chart)\", () => {\r\n    const { start } = getDateRange(\"day\");\r\n    const startDate = new Date(start);\r\n    const endDate = new Date(\"2025-02-20\");\r\n    const diffDays = Math.round((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\r\n    expect(diffDays).toBe(7);\r\n  });\r\n\r\n  it(\"year period gives 365 days back\", () => {\r\n    const { start } = getDateRange(\"year\");\r\n    const startDate = new Date(start);\r\n    const endDate = new Date(\"2025-02-20\");\r\n    const diffDays = Math.round((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\r\n    expect(diffDays).toBe(365);\r\n  });\r\n});\r\n"],"names":["describe","beforeAll","jest","useFakeTimers","setSystemTime","Date","afterAll","useRealTimers","it","start","end","getDateRange","expect","toMatch","toBe","startDate","endDate","diffDays","Math","round","getTime"],"mappings":"AAAA;;;CAGC;;;;2BAC4B;AAE7BA,SAAS,gBAAgB;IACvBC,UAAU;QACR,0CAA0C;QAC1CC,KAAKC,aAAa;QAClBD,KAAKE,aAAa,CAAC,IAAIC,KAAK;IAC9B;IAEAC,SAAS;QACPJ,KAAKK,aAAa;IACpB;IAEAC,GAAG,8CAA8C;QAC/C,MAAM,EAAEC,KAAK,EAAEC,GAAG,EAAE,GAAGC,IAAAA,uBAAY,EAAC;QACpCC,OAAOH,OAAOI,OAAO,CAAC;QACtBD,OAAOF,KAAKG,OAAO,CAAC;IACtB;IAEAL,GAAG,gBAAgB;QACjB,MAAM,EAAEE,GAAG,EAAE,GAAGC,IAAAA,uBAAY,EAAC;QAC7BC,OAAOF,KAAKI,IAAI,CAAC;IACnB;IAEAN,GAAG,mCAAmC;QACpC,MAAM,EAAEC,KAAK,EAAE,GAAGE,IAAAA,uBAAY,EAAC;QAC/B,MAAMI,YAAY,IAAIV,KAAKI;QAC3B,MAAMO,UAAU,IAAIX,KAAK;QACzB,MAAMY,WAAWC,KAAKC,KAAK,CAAC,AAACH,CAAAA,QAAQI,OAAO,KAAKL,UAAUK,OAAO,EAAC,IAAM,CAAA,OAAO,KAAK,KAAK,EAAC;QAC3FR,OAAOK,UAAUH,IAAI,CAAC;IACxB;IAEAN,GAAG,wDAAwD;QACzD,MAAM,EAAEC,KAAK,EAAE,GAAGE,IAAAA,uBAAY,EAAC;QAC/B,MAAMI,YAAY,IAAIV,KAAKI;QAC3B,MAAMO,UAAU,IAAIX,KAAK;QACzB,MAAMY,WAAWC,KAAKC,KAAK,CAAC,AAACH,CAAAA,QAAQI,OAAO,KAAKL,UAAUK,OAAO,EAAC,IAAM,CAAA,OAAO,KAAK,KAAK,EAAC;QAC3FR,OAAOK,UAAUH,IAAI,CAAC;IACxB;IAEAN,GAAG,mCAAmC;QACpC,MAAM,EAAEC,KAAK,EAAE,GAAGE,IAAAA,uBAAY,EAAC;QAC/B,MAAMI,YAAY,IAAIV,KAAKI;QAC3B,MAAMO,UAAU,IAAIX,KAAK;QACzB,MAAMY,WAAWC,KAAKC,KAAK,CAAC,AAACH,CAAAA,QAAQI,OAAO,KAAKL,UAAUK,OAAO,EAAC,IAAM,CAAA,OAAO,KAAK,KAAK,EAAC;QAC3FR,OAAOK,UAAUH,IAAI,CAAC;IACxB;AACF"}