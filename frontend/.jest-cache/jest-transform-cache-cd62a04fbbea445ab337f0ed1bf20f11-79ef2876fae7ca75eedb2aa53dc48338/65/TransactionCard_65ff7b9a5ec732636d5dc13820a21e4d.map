{"version":3,"names":["TransactionCard","transaction","onEdit","onDelete","cov_28buv2wqw1","f","isExpanded","setIsExpanded","s","_react","useState","isIncome","type","categoryName","b","category","name","categoryId","handleCardClick","e","target","closest","_jsxruntime","jsxs","className","onClick","role","tabIndex","onKeyDown","key","preventDefault","_format","formatCurrency","Number","amount","currency","jsx","_ui","Button","variant","size","stopPropagation","fill","strokeLinecap","strokeLinejoin","strokeWidth","viewBox","stroke","d","id","description","formatDate","transactionDate","isRecurring","createdAt","updatedAt"],"sources":["E:\\my\\otus\\finance_tracker\\frontend\\src\\components\\transactions\\TransactionCard.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Transaction } from \"@/types/api\";\nimport { formatCurrency, formatDate } from \"@/utils/format\";\nimport { Button } from \"@/components/ui\";\n\n/**\n * TransactionCard - Карточное представление транзакции для мобильных устройств\n *\n * Responsive Design:\n * - Компактное карточное представление для узких экранов\n * - Все ключевые данные отображаются: дата, категория, сумма, описание\n * - Интерактивность: клик для раскрытия дополнительной информации\n *\n * Layout:\n * - Mobile: flex-col (вертикальное расположение элементов)\n * - Tablet+: sm:flex-row (горизонтальное расположение)\n *\n * Text Overflow:\n * - Описание обрезается до 2 строк (line-clamp-2) в свернутом состоянии\n * - Полное описание отображается при раскрытии карточки\n *\n * Accessibility:\n * - Карточка кликабельна (role=\"button\", tabIndex={0})\n * - Поддержка клавиатурной навигации (Enter, Space)\n * - Aria-атрибуты для screen readers\n *\n * Требования: 8.1, 8.2, 8.3, 8.4\n */\ninterface TransactionCardProps {\n  transaction: Transaction;\n  onEdit: (transaction: Transaction) => void;\n  onDelete: (id: string) => void;\n}\n\nexport function TransactionCard({\n  transaction,\n  onEdit,\n  onDelete,\n}: TransactionCardProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const isIncome = transaction.type === \"income\";\n\n  // Get category name from transaction object\n  const categoryName = (transaction as any).category?.name || transaction.categoryId;\n\n  const handleCardClick = (e: React.MouseEvent) => {\n    // Don't toggle if clicking on buttons\n    if ((e.target as HTMLElement).closest(\"button\")) {\n      return;\n    }\n    setIsExpanded(!isExpanded);\n  };\n\n  return (\n    <div\n      className=\"rounded-2xl border border-border bg-card p-3 shadow-sm hover:shadow-md transition-[box-shadow] cursor-pointer\"\n      onClick={handleCardClick}\n      role=\"button\"\n      tabIndex={0}\n      onKeyDown={(e) => {\n        if (e.key === \"Enter\" || e.key === \" \") {\n          e.preventDefault();\n          setIsExpanded(!isExpanded);\n        }\n      }}\n      aria-expanded={isExpanded}\n      aria-label=\"Transaction card, click to expand\"\n    >\n      {/* Первая строка: сумма и иконки действий */}\n      <div className=\"flex items-center justify-between gap-2 mb-2\">\n        <span\n          className={`text-lg font-semibold ${isIncome ? \"text-secondary\" : \"text-foreground\"}`}\n          aria-label={`${isIncome ? \"Income\" : \"Expense\"} amount`}\n        >\n          {isIncome ? \"+\" : \"−\"}\n          {formatCurrency(Number(transaction.amount), transaction.currency)}\n        </span>\n\n        <div className=\"flex gap-1\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onEdit(transaction);\n            }}\n            aria-label=\"Edit transaction\"\n            className=\"h-8 w-8 p-0 rounded-xl\"\n          >\n            <svg\n              className=\"w-4 h-4\"\n              fill=\"none\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n            </svg>\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onDelete(transaction.id);\n            }}\n            aria-label=\"Delete transaction\"\n            className=\"h-8 w-8 p-0 rounded-xl text-destructive hover:text-destructive hover:bg-destructive/10\"\n          >\n            <svg\n              className=\"w-4 h-4\"\n              fill=\"none\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n            </svg>\n          </Button>\n        </div>\n      </div>\n\n      {/* Описание */}\n      {transaction.description && (\n        <p\n          className={`text-sm text-foreground mb-2 ${isExpanded ? \"\" : \"line-clamp-2\"}`}\n        >\n          {transaction.description}\n        </p>\n      )}\n\n      {/* Информация в 2 колонках */}\n      <div className=\"grid grid-cols-2 gap-2 text-xs\">\n        {/* Левая колонка: дата */}\n        <div className=\"space-y-1\">\n          <div className=\"flex items-center gap-1 text-muted-foreground\">\n            <svg\n              className=\"w-3 h-3\"\n              fill=\"none\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth=\"2\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n            </svg>\n            <span>{formatDate(transaction.transactionDate)}</span>\n          </div>\n        </div>\n\n        {/* Правая колонка: категория и повтор */}\n        <div className=\"space-y-1\">\n          <div className=\"text-muted-foreground truncate\">\n            <span className=\"font-medium\">Категория:</span> {categoryName}\n          </div>\n          {transaction.isRecurring && (\n            <div className=\"flex items-center gap-1 text-primary\">\n              <svg\n                className=\"w-3 h-3\"\n                fill=\"none\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"2\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n              </svg>\n              <span>Повтор</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Развернутая информация */}\n      {isExpanded && (\n        <div className=\"mt-2 pt-2 border-t border-border space-y-1 text-xs text-muted-foreground\">\n          <div>\n            <span className=\"font-medium\">ID:</span> {transaction.id}\n          </div>\n          <div>\n            <span className=\"font-medium\">Создано:</span>{\" \"}\n            {formatDate(transaction.createdAt)}\n          </div>\n          <div>\n            <span className=\"font-medium\">Обновлено:</span>{\" \"}\n            {formatDate(transaction.updatedAt)}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}