{"version":3,"names":["cov_2hzgh2zvdb","actualCoverage","s","csvApi","importCsv","data","f","res","_client","apiClient","post","fileContent","mapping","dateFormat","b","getExportUrl","params","base","process","env","NEXT_PUBLIC_API_URL","search","URLSearchParams","startDate","set","endDate","categoryId","columns","length","join","q","toString"],"sources":["E:\\my\\otus\\finance_tracker\\frontend\\src\\services\\api\\csv.ts"],"sourcesContent":["import { apiClient } from \"./client\";\nimport type { CSVColumnMapping, CSVImportResult } from \"@/types/api\";\n\nexport interface CSVImportRequest {\n  fileContent: string;\n  mapping: CSVColumnMapping;\n  dateFormat?: string;\n}\n\nexport interface CSVExportParams {\n  startDate?: string;\n  endDate?: string;\n  categoryId?: string;\n  columns?: string[];\n  dateFormat?: string;\n}\n\nexport const csvApi = {\n  async importCsv(data: CSVImportRequest): Promise<CSVImportResult> {\n    const res = await apiClient.post<CSVImportResult>(\"/csv/import\", {\n      fileContent: data.fileContent,\n      mapping: data.mapping,\n      dateFormat: data.dateFormat ?? \"%Y-%m-%d\",\n    });\n    return res.data;\n  },\n\n  getExportUrl(params: CSVExportParams): string {\n    const base = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000/api/v1\";\n    const search = new URLSearchParams();\n    if (params.startDate) search.set(\"start_date\", params.startDate);\n    if (params.endDate) search.set(\"end_date\", params.endDate);\n    if (params.categoryId) search.set(\"category_id\", params.categoryId);\n    if (params.columns?.length) search.set(\"columns\", params.columns.join(\",\"));\n    if (params.dateFormat) search.set(\"date_format\", params.dateFormat);\n    const q = search.toString();\n    return `${base}/csv/export${q ? `?${q}` : \"\"}`;\n  },\n};\n"],"mappings":"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","ignoreList":[]}