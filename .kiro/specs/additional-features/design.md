# –î–æ–∫—É–º–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω—ã–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏. –í–∫–ª—é—á–∞–µ—Ç —á–µ—Ç—ã—Ä–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª—è:

1. **–ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç CSV**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤—ã–≥—Ä—É–∑–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ CSV
2. **–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
3. **–ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π
4. **–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:
- Backend: FastAPI + SQLAlchemy + Celery (—Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏) + Redis (–±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π)
- Frontend: Next.js + TypeScript + React Hook Form
- CSV –æ–±—Ä–∞–±–æ—Ç–∫–∞: Python csv module + pandas
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫: Celery Beat
- API –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç: exchangerate-api.com

–ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Celery –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –±–æ–ª—å—à–∏—Ö CSV —Ñ–∞–π–ª–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –≤ Redis –Ω–∞ 24 —á–∞—Å–∞
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –æ—Ç—á–µ—Ç–æ–≤
- Celery Beat –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è CSV –¥–∞–Ω–Ω—ã—Ö —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –æ—Ç—á–µ—Ç–∞–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Frontend Layer                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Next.js Components                                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - CSVImportForm                                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - CSVExportDialog                                      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - RecurringTransactionManager                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - CurrencySelector                                     ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚îÇ HTTP/REST
                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        API Layer                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  FastAPI Endpoints                                      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - POST /api/v1/transactions/import                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - GET  /api/v1/transactions/export                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - CRUD /api/v1/recurring-transactions                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - GET  /api/v1/currencies                              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - GET  /api/v1/tasks/{task_id}/status                  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Service Layer                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  - CSVImportService                                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - CSVExportService                                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - RecurringTransactionService                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - CurrencyService                                      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - ExchangeRateService                                  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Background Tasks Layer                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Celery Workers                                         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - import_csv_task                                      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - create_recurring_transactions_task                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - update_exchange_rates_task                           ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Celery Beat Scheduler                                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - Daily: create recurring transactions (00:00 UTC)     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - Daily: update exchange rates (01:00 UTC)             ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Data Layer                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  PostgreSQL                                             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - recurring_transactions table                         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - exchange_rates table                                 ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - currencies table                                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - task_results table                                   ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Redis                                                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - Celery message broker                                ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - Exchange rate cache (TTL: 24h)                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  - Task status cache                                    ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recurring_transaction.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exchange_rate.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ currency.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task_result.py
‚îÇ   ‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recurring_transaction.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exchange_rate.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ currency.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csv_import.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task.py
‚îÇ   ‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recurring_transaction.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exchange_rate.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ currency.py
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csv_import.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csv_export.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recurring_transaction.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ currency.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exchange_rate.py
‚îÇ   ‚îú‚îÄ‚îÄ tasks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ celery_app.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csv_tasks.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recurring_tasks.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ currency_tasks.py
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ csv.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ recurring_transactions.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ currencies.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ tasks.py
‚îÇ   ‚îî‚îÄ‚îÄ core/
‚îÇ       ‚îî‚îÄ‚îÄ currency_api_client.py
‚îú‚îÄ‚îÄ alembic/
‚îÇ   ‚îî‚îÄ‚îÄ versions/
‚îÇ       ‚îú‚îÄ‚îÄ YYYYMMDD_add_recurring_transactions.py
‚îÇ       ‚îú‚îÄ‚îÄ YYYYMMDD_add_currencies.py
‚îÇ       ‚îî‚îÄ‚îÄ YYYYMMDD_add_exchange_rates.py
‚îî‚îÄ‚îÄ requirements.txt (–¥–æ–±–∞–≤–∏—Ç—å: celery, redis, pandas, httpx)

frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csv/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CSVImportForm.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CSVMappingDialog.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CSVPreview.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CSVExportDialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recurring/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecurringTransactionList.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RecurringTransactionForm.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RecurringTransactionCard.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ currency/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ CurrencySelector.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ CurrencyDisplay.tsx
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csvService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recurringTransactionService.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ currencyService.ts
‚îÇ   ‚îî‚îÄ‚îÄ types/
‚îÇ       ‚îú‚îÄ‚îÄ csv.ts
‚îÇ       ‚îú‚îÄ‚îÄ recurring.ts
‚îÇ       ‚îî‚îÄ‚îÄ currency.ts
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy)

#### RecurringTransaction Model

```python
from sqlalchemy import Column, String, Numeric, Boolean, ForeignKey, Date, JSON
from sqlalchemy.dialects.postgresql import UUID
from sqlalchemy.orm import relationship
import uuid

class RecurringTransaction(Base):
    __tablename__ = "recurring_transactions"
    
    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)
    name = Column(String(200), nullable=False)
    amount = Column(Numeric(15, 2), nullable=False)
    currency = Column(String(3), nullable=False, default="USD")
    category_id = Column(UUID(as_uuid=True), ForeignKey("categories.id"), nullable=False)
    description = Column(String, nullable=True)
    type = Column(String(10), nullable=False)
    
    # –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
    frequency = Column(String(20), nullable=False)  # daily, weekly, monthly, yearly
    interval = Column(Integer, nullable=False, default=1)  # –∫–∞–∂–¥—ã–µ N –¥–Ω–µ–π/–Ω–µ–¥–µ–ª—å/–º–µ—Å—è—Ü–µ–≤
    start_date = Column(Date, nullable=False)
    end_date = Column(Date, nullable=True)
    next_occurrence = Column(Date, nullable=False)
    
    # –°—Ç–∞—Ç—É—Å
    is_active = Column(Boolean, default=True)
    
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # Relationships
    category = relationship("Category")
    
    __table_args__ = (
        CheckConstraint("amount > 0", name="check_positive_recurring_amount"),
        CheckConstraint("type IN ('income', 'expense')", name="check_valid_recurring_type"),
        CheckConstraint(
            "frequency IN ('daily', 'weekly', 'monthly', 'yearly')",
            name="check_valid_frequency"
        ),
        CheckConstraint("interval > 0", name="check_positive_interval"),
    )
```

#### Currency Model

```python
class Currency(Base):
    __tablename__ = "currencies"
    
    code = Column(String(3), primary_key=True)  # USD, EUR, RUB, etc.
    name = Column(String(100), nullable=False)
    symbol = Column(String(10), nullable=False)
    is_active = Column(Boolean, default=True)
    
    created_at = Column(DateTime, default=datetime.utcnow)
```

#### ExchangeRate Model

```python
class ExchangeRate(Base):
    __tablename__ = "exchange_rates"
    
    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)
    from_currency = Column(String(3), ForeignKey("currencies.code"), nullable=False)
    to_currency = Column(String(3), ForeignKey("currencies.code"), nullable=False)
    rate = Column(Numeric(20, 10), nullable=False)
    date = Column(Date, nullable=False)
    
    created_at = Column(DateTime, default=datetime.utcnow)
    
    __table_args__ = (
        UniqueConstraint("from_currency", "to_currency", "date", name="unique_rate_per_day"),
        CheckConstraint("rate > 0", name="check_positive_rate"),
    )
```

#### TaskResult Model

```python
class TaskResult(Base):
    __tablename__ = "task_results"
    
    id = Column(UUID(as_uuid=True), primary_key=True, default=uuid.uuid4)
    task_id = Column(String(255), unique=True, nullable=False)
    task_type = Column(String(50), nullable=False)  # csv_import, recurring_creation, etc.
    status = Column(String(20), nullable=False)  # pending, running, completed, failed
    result = Column(JSON, nullable=True)
    error = Column(String, nullable=True)
    
    created_at = Column(DateTime, default=datetime.utcnow)
    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
```

### 2. Pydantic —Å—Ö–µ–º—ã

#### RecurringTransaction Schemas

```python
from pydantic import BaseModel, Field, field_validator
from datetime import date
from decimal import Decimal
from enum import Enum
import uuid

class FrequencyType(str, Enum):
    DAILY = "daily"
    WEEKLY = "weekly"
    MONTHLY = "monthly"
    YEARLY = "yearly"

class RecurringTransactionBase(BaseModel):
    name: str = Field(..., min_length=1, max_length=200)
    amount: Decimal = Field(..., gt=0, decimal_places=2)
    currency: str = Field(default="USD", min_length=3, max_length=3)
    category_id: uuid.UUID
    description: str | None = None
    type: str = Field(..., pattern="^(income|expense)$")
    frequency: FrequencyType
    interval: int = Field(..., gt=0)
    start_date: date
    end_date: date | None = None
    
    @field_validator("end_date")
    @classmethod
    def validate_end_date(cls, v, info):
        if v and "start_date" in info.data and v <= info.data["start_date"]:
            raise ValueError("end_date must be after start_date")
        return v

class RecurringTransactionCreate(RecurringTransactionBase):
    pass

class RecurringTransactionUpdate(BaseModel):
    name: str | None = Field(None, min_length=1, max_length=200)
    amount: Decimal | None = Field(None, gt=0, decimal_places=2)
    currency: str | None = Field(None, min_length=3, max_length=3)
    category_id: uuid.UUID | None = None
    description: str | None = None
    type: str | None = Field(None, pattern="^(income|expense)$")
    frequency: FrequencyType | None = None
    interval: int | None = Field(None, gt=0)
    start_date: date | None = None
    end_date: date | None = None
    is_active: bool | None = None

class RecurringTransaction(RecurringTransactionBase):
    id: uuid.UUID
    next_occurrence: date
    is_active: bool
    created_at: datetime
    updated_at: datetime
    
    model_config = {"from_attributes": True}
```

#### CSV Import/Export Schemas

```python
class CSVColumnMapping(BaseModel):
    amount: str
    currency: str | None = None
    category_name: str
    description: str | None = None
    transaction_date: str
    type: str

class CSVImportRequest(BaseModel):
    file_content: str  # Base64 encoded CSV
    mapping: CSVColumnMapping
    date_format: str = "%Y-%m-%d"

class CSVImportResult(BaseModel):
    task_id: str
    status: str
    created_count: int = 0
    error_count: int = 0
    errors: list[dict] = []

class CSVExportRequest(BaseModel):
    start_date: date | None = None
    end_date: date | None = None
    category_id: uuid.UUID | None = None
    columns: list[str] = ["amount", "currency", "category_name", "description", "transaction_date", "type"]
    date_format: str = "%Y-%m-%d"
```

#### Currency Schemas

```python
class CurrencyBase(BaseModel):
    code: str = Field(..., min_length=3, max_length=3)
    name: str = Field(..., min_length=1, max_length=100)
    symbol: str = Field(..., min_length=1, max_length=10)

class Currency(CurrencyBase):
    is_active: bool
    created_at: datetime
    
    model_config = {"from_attributes": True}

class ExchangeRateBase(BaseModel):
    from_currency: str = Field(..., min_length=3, max_length=3)
    to_currency: str = Field(..., min_length=3, max_length=3)
    rate: Decimal = Field(..., gt=0, decimal_places=10)
    date: date

class ExchangeRate(ExchangeRateBase):
    id: uuid.UUID
    created_at: datetime
    
    model_config = {"from_attributes": True}
```

#### Task Schemas

```python
class TaskStatus(str, Enum):
    PENDING = "pending"
    RUNNING = "running"
    COMPLETED = "completed"
    FAILED = "failed"

class TaskStatusResponse(BaseModel):
    task_id: str
    task_type: str
    status: TaskStatus
    result: dict | None = None
    error: str | None = None
    created_at: datetime
    updated_at: datetime
```

### 3. Repository —Å–ª–æ–π

#### RecurringTransactionRepository

```python
from sqlalchemy import select, and_
from datetime import date

class RecurringTransactionRepository(BaseRepository[RecurringTransaction]):
    async def get_active_due_today(self, current_date: date) -> list[RecurringTransaction]:
        """–ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Å–µ–≥–æ–¥–Ω—è"""
        result = await self.session.execute(
            select(RecurringTransaction).where(
                and_(
                    RecurringTransaction.is_active == True,
                    RecurringTransaction.next_occurrence <= current_date,
                    or_(
                        RecurringTransaction.end_date.is_(None),
                        RecurringTransaction.end_date >= current_date
                    )
                )
            )
        )
        return list(result.scalars().all())
    
    async def update_next_occurrence(
        self, recurring_id: uuid.UUID, next_date: date
    ) -> None:
        """–û–±–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"""
        await self.session.execute(
            update(RecurringTransaction)
            .where(RecurringTransaction.id == recurring_id)
            .values(next_occurrence=next_date)
        )
        await self.session.commit()
```

#### ExchangeRateRepository

```python
class ExchangeRateRepository(BaseRepository[ExchangeRate]):
    async def get_rate(
        self, from_currency: str, to_currency: str, date: date
    ) -> ExchangeRate | None:
        """–ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å –≤–∞–ª—é—Ç—ã –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –¥–∞—Ç—É"""
        result = await self.session.execute(
            select(ExchangeRate).where(
                and_(
                    ExchangeRate.from_currency == from_currency,
                    ExchangeRate.to_currency == to_currency,
                    ExchangeRate.date == date
                )
            )
        )
        return result.scalar_one_or_none()
    
    async def get_latest_rate(
        self, from_currency: str, to_currency: str
    ) -> ExchangeRate | None:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫—É—Ä—Å"""
        result = await self.session.execute(
            select(ExchangeRate)
            .where(
                and_(
                    ExchangeRate.from_currency == from_currency,
                    ExchangeRate.to_currency == to_currency
                )
            )
            .order_by(ExchangeRate.date.desc())
            .limit(1)
        )
        return result.scalar_one_or_none()
    
    async def bulk_create(self, rates: list[dict]) -> None:
        """–ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç"""
        instances = [ExchangeRate(**rate) for rate in rates]
        self.session.add_all(instances)
        await self.session.commit()
```

#### CurrencyRepository

```python
class CurrencyRepository(BaseRepository[Currency]):
    async def get_by_code(self, code: str) -> Currency | None:
        """–ü–æ–ª—É—á–∏—Ç—å –≤–∞–ª—é—Ç—É –ø–æ –∫–æ–¥—É"""
        result = await self.session.execute(
            select(Currency).where(Currency.code == code)
        )
        return result.scalar_one_or_none()
    
    async def get_active_currencies(self) -> list[Currency]:
        """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∞–ª—é—Ç"""
        result = await self.session.execute(
            select(Currency).where(Currency.is_active == True)
        )
        return list(result.scalars().all())
```

### 4. Service —Å–ª–æ–π

#### CSVImportService

```python
import csv
from io import StringIO
import base64
from decimal import Decimal
from datetime import datetime

class CSVImportService:
    def __init__(
        self,
        transaction_service: TransactionService,
        category_repo: CategoryRepository
    ):
        self.transaction_service = transaction_service
        self.category_repo = category_repo
    
    async def import_csv(
        self, file_content: str, mapping: CSVColumnMapping, date_format: str
    ) -> CSVImportResult:
        """–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ CSV"""
        # –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å base64
        csv_content = base64.b64decode(file_content).decode('utf-8')
        
        # –ï—Å–ª–∏ —Ñ–∞–π–ª –±–æ–ª—å—à–æ–π (>1000 —Å—Ç—Ä–æ–∫), –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
        line_count = csv_content.count('\n')
        if line_count > 1000:
            from app.tasks.csv_tasks import import_csv_task
            task = import_csv_task.delay(csv_content, mapping.model_dump(), date_format)
            return CSVImportResult(
                task_id=task.id,
                status="pending"
            )
        
        # –ò–Ω–∞—á–µ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        return await self._process_csv(csv_content, mapping, date_format)
    
    async def _process_csv(
        self, csv_content: str, mapping: CSVColumnMapping, date_format: str
    ) -> CSVImportResult:
        """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å CSV —Ñ–∞–π–ª"""
        reader = csv.DictReader(StringIO(csv_content))
        created_count = 0
        errors = []
        
        for row_num, row in enumerate(reader, start=2):
            try:
                # –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
                if not row.get(mapping.amount) or not row.get(mapping.transaction_date):
                    errors.append({
                        "row": row_num,
                        "error": "Missing required fields: amount or transaction_date"
                    })
                    continue
                
                # –ü–∞—Ä—Å–∏–Ω–≥ —Å—É–º–º—ã
                try:
                    amount = Decimal(row[mapping.amount].strip())
                    if amount <= 0:
                        raise ValueError("Amount must be positive")
                except (ValueError, InvalidOperation) as e:
                    errors.append({
                        "row": row_num,
                        "error": f"Invalid amount: {str(e)}"
                    })
                    continue
                
                # –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç—ã
                try:
                    transaction_date = datetime.strptime(
                        row[mapping.transaction_date].strip(), date_format
                    ).date()
                except ValueError as e:
                    errors.append({
                        "row": row_num,
                        "error": f"Invalid date format: {str(e)}"
                    })
                    continue
                
                # –ü–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                category_name = row[mapping.category_name].strip()
                transaction_type = row[mapping.type].strip().lower()
                
                if transaction_type not in ['income', 'expense']:
                    errors.append({
                        "row": row_num,
                        "error": f"Invalid type: {transaction_type}"
                    })
                    continue
                
                category = await self.category_repo.get_by_name_and_type(
                    category_name, transaction_type
                )
                
                if not category:
                    # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                    from app.schemas.category import CategoryCreate
                    category_data = CategoryCreate(
                        name=category_name,
                        icon="üìÅ",
                        color="#808080",
                        type=transaction_type
                    )
                    category = await self.category_repo.create(**category_data.model_dump())
                
                # –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
                from app.schemas.transaction import TransactionCreate
                transaction_data = TransactionCreate(
                    amount=amount,
                    currency=row.get(mapping.currency, "USD").strip().upper() if mapping.currency else "USD",
                    category_id=category.id,
                    description=row.get(mapping.description, "").strip() if mapping.description else None,
                    transaction_date=transaction_date,
                    type=transaction_type
                )
                
                await self.transaction_service.create_transaction(transaction_data)
                created_count += 1
                
            except Exception as e:
                errors.append({
                    "row": row_num,
                    "error": f"Unexpected error: {str(e)}"
                })
        
        return CSVImportResult(
            task_id="sync",
            status="completed",
            created_count=created_count,
            error_count=len(errors),
            errors=errors
        )
```

#### CSVExportService

```python
class CSVExportService:
    def __init__(self, transaction_repo: TransactionRepository):
        self.transaction_repo = transaction_repo
    
    async def export_csv(
        self,
        start_date: date | None,
        end_date: date | None,
        category_id: uuid.UUID | None,
        columns: list[str],
        date_format: str
    ) -> str:
        """–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ CSV"""
        # –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        transactions, _ = await self.transaction_repo.get_filtered(
            start_date=start_date,
            end_date=end_date,
            category_id=category_id,
            limit=100000
        )
        
        # –°–æ–∑–¥–∞—Ç—å CSV
        output = StringIO()
        writer = csv.DictWriter(output, fieldnames=columns)
        writer.writeheader()
        
        for t in transactions:
            row = {}
            if "amount" in columns:
                row["amount"] = str(t.amount)
            if "currency" in columns:
                row["currency"] = t.currency
            if "category_name" in columns:
                row["category_name"] = t.category.name
            if "description" in columns:
                row["description"] = t.description or ""
            if "transaction_date" in columns:
                row["transaction_date"] = t.transaction_date.strftime(date_format)
            if "type" in columns:
                row["type"] = t.type
            
            writer.writerow(row)
        
        return output.getvalue()
```

#### RecurringTransactionService

```python
from datetime import timedelta
from dateutil.relativedelta import relativedelta

class RecurringTransactionService:
    def __init__(
        self,
        recurring_repo: RecurringTransactionRepository,
        transaction_service: TransactionService,
        category_repo: CategoryRepository
    ):
        self.recurring_repo = recurring_repo
        self.transaction_service = transaction_service
        self.category_repo = category_repo
    
    async def create_recurring_transaction(
        self, data: RecurringTransactionCreate
    ) -> RecurringTransaction:
        """–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–π—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"""
        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        category = await self.category_repo.get_by_id(data.category_id)
        if not category:
            raise NotFoundException("Category not found")
        
        # –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–µ—Ä–≤—É—é –¥–∞—Ç—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        next_occurrence = data.start_date
        
        # –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
        recurring = await self.recurring_repo.create(
            **data.model_dump(),
            next_occurrence=next_occurrence
        )
        return RecurringTransaction.model_validate(recurring)
    
    async def update_recurring_transaction(
        self, recurring_id: uuid.UUID, data: RecurringTransactionUpdate
    ) -> RecurringTransaction:
        """–û–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω"""
        existing = await self.recurring_repo.get_by_id(recurring_id)
        if not existing:
            raise NotFoundException("Recurring transaction not found")
        
        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
        if data.category_id:
            category = await self.category_repo.get_by_id(data.category_id)
            if not category:
                raise NotFoundException("Category not found")
        
        # –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å next_occurrence –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
        update_data = data.model_dump(exclude_unset=True)
        if any(k in update_data for k in ['frequency', 'interval', 'start_date']):
            frequency = update_data.get('frequency', existing.frequency)
            interval = update_data.get('interval', existing.interval)
            start_date = update_data.get('start_date', existing.start_date)
            update_data['next_occurrence'] = self._calculate_next_occurrence(
                start_date, frequency, interval, date.today()
            )
        
        updated = await self.recurring_repo.update(recurring_id, **update_data)
        return RecurringTransaction.model_validate(updated)
    
    async def delete_recurring_transaction(self, recurring_id: uuid.UUID) -> None:
        """–£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω"""
        deleted = await self.recurring_repo.delete(recurring_id)
        if not deleted:
            raise NotFoundException("Recurring transaction not found")
    
    async def process_due_recurring_transactions(self, current_date: date) -> dict:
        """–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ —à–∞–±–ª–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã"""
        recurring_transactions = await self.recurring_repo.get_active_due_today(current_date)
        
        created_count = 0
        errors = []
        
        for recurring in recurring_transactions:
            try:
                # –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
                from app.schemas.transaction import TransactionCreate
                transaction_data = TransactionCreate(
                    amount=recurring.amount,
                    currency=recurring.currency,
                    category_id=recurring.category_id,
                    description=f"{recurring.name} (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–æ)",
                    transaction_date=recurring.next_occurrence,
                    type=recurring.type
                )
                
                await self.transaction_service.create_transaction(transaction_data)
                created_count += 1
                
                # –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –¥–∞—Ç—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
                next_date = self._calculate_next_occurrence(
                    recurring.next_occurrence,
                    recurring.frequency,
                    recurring.interval,
                    current_date
                )
                
                # –û–±–Ω–æ–≤–∏—Ç—å next_occurrence
                await self.recurring_repo.update_next_occurrence(recurring.id, next_date)
                
            except Exception as e:
                errors.append({
                    "recurring_id": str(recurring.id),
                    "error": str(e)
                })
        
        return {
            "created_count": created_count,
            "error_count": len(errors),
            "errors": errors
        }
    
    def _calculate_next_occurrence(
        self, current_date: date, frequency: str, interval: int, reference_date: date
    ) -> date:
        """–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –¥–∞—Ç—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"""
        if frequency == "daily":
            return current_date + timedelta(days=interval)
        elif frequency == "weekly":
            return current_date + timedelta(weeks=interval)
        elif frequency == "monthly":
            return current_date + relativedelta(months=interval)
        elif frequency == "yearly":
            return current_date + relativedelta(years=interval)
        else:
            raise ValueError(f"Invalid frequency: {frequency}")
```

#### CurrencyService

```python
class CurrencyService:
    def __init__(
        self,
        currency_repo: CurrencyRepository,
        exchange_rate_repo: ExchangeRateRepository
    ):
        self.currency_repo = currency_repo
        self.exchange_rate_repo = exchange_rate_repo
    
    async def get_currencies(self) -> list[Currency]:
        """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∞–ª—é—Ç"""
        currencies = await self.currency_repo.get_active_currencies()
        return [Currency.model_validate(c) for c in currencies]
    
    async def convert_amount(
        self,
        amount: Decimal,
        from_currency: str,
        to_currency: str,
        date: date
    ) -> Decimal:
        """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É–º–º—É –∏–∑ –æ–¥–Ω–æ–π –≤–∞–ª—é—Ç—ã –≤ –¥—Ä—É–≥—É—é"""
        if from_currency == to_currency:
            return amount
        
        # –ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å –Ω–∞ –¥–∞—Ç—É
        rate = await self.exchange_rate_repo.get_rate(from_currency, to_currency, date)
        
        if not rate:
            # –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫—É—Ä—Å
            rate = await self.exchange_rate_repo.get_latest_rate(from_currency, to_currency)
            
            if not rate:
                raise NotFoundException(
                    f"Exchange rate not found for {from_currency} to {to_currency}"
                )
        
        return amount * rate.rate
```

#### ExchangeRateService

```python
import httpx
from app.core.currency_api_client import CurrencyAPIClient

class ExchangeRateService:
    def __init__(
        self,
        exchange_rate_repo: ExchangeRateRepository,
        currency_repo: CurrencyRepository,
        api_client: CurrencyAPIClient
    ):
        self.exchange_rate_repo = exchange_rate_repo
        self.currency_repo = currency_repo
        self.api_client = api_client
    
    async def update_exchange_rates(self, base_currency: str = "USD") -> dict:
        """–û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π API"""
        try:
            # –ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å—ã –æ—Ç API
            rates_data = await self.api_client.get_latest_rates(base_currency)
            
            # –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∞–ª—é—Ç
            currencies = await self.currency_repo.get_active_currencies()
            currency_codes = [c.code for c in currencies]
            
            # –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
            today = date.today()
            rates_to_save = []
            
            for to_currency in currency_codes:
                if to_currency == base_currency:
                    continue
                
                if to_currency in rates_data:
                    rates_to_save.append({
                        "from_currency": base_currency,
                        "to_currency": to_currency,
                        "rate": Decimal(str(rates_data[to_currency])),
                        "date": today
                    })
            
            # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫—É—Ä—Å—ã
            await self.exchange_rate_repo.bulk_create(rates_to_save)
            
            return {
                "success": True,
                "updated_count": len(rates_to_save),
                "date": today
            }
            
        except Exception as e:
            return {
                "success": False,
                "error": str(e)
            }
    
    async def get_exchange_rate(
        self, from_currency: str, to_currency: str, date: date
    ) -> ExchangeRate:
        """–ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å –≤–∞–ª—é—Ç—ã –Ω–∞ –¥–∞—Ç—É"""
        rate = await self.exchange_rate_repo.get_rate(from_currency, to_currency, date)
        
        if not rate:
            # –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫—É—Ä—Å
            rate = await self.exchange_rate_repo.get_latest_rate(from_currency, to_currency)
            
            if not rate:
                raise NotFoundException(
                    f"Exchange rate not found for {from_currency} to {to_currency}"
                )
        
        return ExchangeRate.model_validate(rate)
```

### 5. Celery –∑–∞–¥–∞—á–∏

#### CSV Tasks

```python
from celery import Task
from app.tasks.celery_app import celery_app
from app.services.csv_import import CSVImportService
from app.models.task_result import TaskResult

@celery_app.task(bind=True)
def import_csv_task(
    self: Task,
    csv_content: str,
    mapping: dict,
    date_format: str
) -> dict:
    """–§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –∏–º–ø–æ—Ä—Ç–∞ CSV"""
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏
    task_result = TaskResult(
        task_id=self.request.id,
        task_type="csv_import",
        status="running"
    )
    db.add(task_result)
    db.commit()
    
    try:
        # –í—ã–ø–æ–ª–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç
        from app.schemas.csv_import import CSVColumnMapping
        mapping_obj = CSVColumnMapping(**mapping)
        
        # –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å
        service = CSVImportService(transaction_service, category_repo)
        result = await service._process_csv(csv_content, mapping_obj, date_format)
        
        # –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
        task_result.status = "completed"
        task_result.result = result.model_dump()
        db.commit()
        
        return result.model_dump()
        
    except Exception as e:
        # –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å –æ—à–∏–±–∫–æ–π
        task_result.status = "failed"
        task_result.error = str(e)
        db.commit()
        raise
```

#### Recurring Tasks

```python
@celery_app.task
def create_recurring_transactions_task() -> dict:
    """–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π"""
    from app.services.recurring_transaction import RecurringTransactionService
    
    service = RecurringTransactionService(
        recurring_repo, transaction_service, category_repo
    )
    
    result = await service.process_due_recurring_transactions(date.today())
    return result
```

#### Currency Tasks

```python
@celery_app.task
def update_exchange_rates_task() -> dict:
    """–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç"""
    from app.services.exchange_rate import ExchangeRateService
    
    service = ExchangeRateService(
        exchange_rate_repo, currency_repo, api_client
    )
    
    result = await service.update_exchange_rates()
    return result
```

### 6. Celery –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### celery_app.py

```python
from celery import Celery
from celery.schedules import crontab

celery_app = Celery(
    "finance_tracker",
    broker="redis://redis:6379/0",
    backend="redis://redis:6379/0"
)

celery_app.conf.update(
    task_serializer="json",
    accept_content=["json"],
    result_serializer="json",
    timezone="UTC",
    enable_utc=True,
    task_track_started=True,
    task_time_limit=30 * 60,  # 30 –º–∏–Ω—É—Ç
    worker_max_tasks_per_child=1000,
)

# –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è Celery Beat
celery_app.conf.beat_schedule = {
    "create-recurring-transactions": {
        "task": "app.tasks.recurring_tasks.create_recurring_transactions_task",
        "schedule": crontab(hour=0, minute=0),  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00 UTC
    },
    "update-exchange-rates": {
        "task": "app.tasks.currency_tasks.update_exchange_rates_task",
        "schedule": crontab(hour=1, minute=0),  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 01:00 UTC
    },
}
```

### 7. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### CSV Routes

```python
from fastapi import APIRouter, UploadFile, File, Depends
from fastapi.responses import StreamingResponse
from io import BytesIO

router = APIRouter(prefix="/api/v1/csv", tags=["csv"])

@router.post("/import", response_model=CSVImportResult)
async def import_csv(
    request: CSVImportRequest,
    csv_service: CSVImportService = Depends()
):
    """–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ CSV"""
    result = await csv_service.import_csv(
        request.file_content,
        request.mapping,
        request.date_format
    )
    return result

@router.get("/export")
async def export_csv(
    request: CSVExportRequest = Depends(),
    csv_service: CSVExportService = Depends()
):
    """–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ CSV"""
    csv_content = await csv_service.export_csv(
        request.start_date,
        request.end_date,
        request.category_id,
        request.columns,
        request.date_format
    )
    
    # –í–µ—Ä–Ω—É—Ç—å –∫–∞–∫ —Ñ–∞–π–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    return StreamingResponse(
        BytesIO(csv_content.encode()),
        media_type="text/csv",
        headers={
            "Content-Disposition": f"attachment; filename=transactions_{date.today()}.csv"
        }
    )
```

#### Recurring Transaction Routes

```python
router = APIRouter(prefix="/api/v1/recurring-transactions", tags=["recurring"])

@router.post("", response_model=RecurringTransaction, status_code=201)
async def create_recurring_transaction(
    data: RecurringTransactionCreate,
    service: RecurringTransactionService = Depends()
):
    """–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–π—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"""
    return await service.create_recurring_transaction(data)

@router.get("", response_model=list[RecurringTransaction])
async def list_recurring_transactions(
    service: RecurringTransactionService = Depends()
):
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–æ–≤"""
    return await service.list_recurring_transactions()

@router.get("/{recurring_id}", response_model=RecurringTransaction)
async def get_recurring_transaction(
    recurring_id: uuid.UUID,
    service: RecurringTransactionService = Depends()
):
    """–ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω –ø–æ ID"""
    return await service.get_recurring_transaction(recurring_id)

@router.put("/{recurring_id}", response_model=RecurringTransaction)
async def update_recurring_transaction(
    recurring_id: uuid.UUID,
    data: RecurringTransactionUpdate,
    service: RecurringTransactionService = Depends()
):
    """–û–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω"""
    return await service.update_recurring_transaction(recurring_id, data)

@router.delete("/{recurring_id}", status_code=204)
async def delete_recurring_transaction(
    recurring_id: uuid.UUID,
    service: RecurringTransactionService = Depends()
):
    """–£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω"""
    await service.delete_recurring_transaction(recurring_id)
```

#### Currency Routes

```python
router = APIRouter(prefix="/api/v1/currencies", tags=["currencies"])

@router.get("", response_model=list[Currency])
async def list_currencies(
    service: CurrencyService = Depends()
):
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∞–ª—é—Ç"""
    return await service.get_currencies()

@router.get("/exchange-rate", response_model=ExchangeRate)
async def get_exchange_rate(
    from_currency: str,
    to_currency: str,
    date: date = date.today(),
    service: ExchangeRateService = Depends()
):
    """–ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å –≤–∞–ª—é—Ç—ã –Ω–∞ –¥–∞—Ç—É"""
    return await service.get_exchange_rate(from_currency, to_currency, date)
```

#### Task Routes

```python
router = APIRouter(prefix="/api/v1/tasks", tags=["tasks"])

@router.get("/{task_id}/status", response_model=TaskStatusResponse)
async def get_task_status(
    task_id: str,
    db: AsyncSession = Depends(get_db)
):
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏"""
    result = await db.execute(
        select(TaskResult).where(TaskResult.task_id == task_id)
    )
    task_result = result.scalar_one_or_none()
    
    if not task_result:
        raise NotFoundException("Task not found")
    
    return TaskStatusResponse.model_validate(task_result)
```

### 8. Currency API Client

```python
import httpx
from app.core.config import settings

class CurrencyAPIClient:
    def __init__(self):
        self.base_url = "https://api.exchangerate-api.com/v4/latest"
        self.timeout = 10.0
    
    async def get_latest_rates(self, base_currency: str = "USD") -> dict:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç"""
        async with httpx.AsyncClient(timeout=self.timeout) as client:
            response = await client.get(f"{self.base_url}/{base_currency}")
            response.raise_for_status()
            data = response.json()
            return data["rates"]
```

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞ recurring_transactions

```sql
CREATE TABLE recurring_transactions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(200) NOT NULL,
    amount DECIMAL(15, 2) NOT NULL,
    currency VARCHAR(3) NOT NULL DEFAULT 'USD',
    category_id UUID NOT NULL REFERENCES categories(id) ON DELETE RESTRICT,
    description TEXT,
    type VARCHAR(10) NOT NULL CHECK (type IN ('income', 'expense')),
    
    frequency VARCHAR(20) NOT NULL CHECK (frequency IN ('daily', 'weekly', 'monthly', 'yearly')),
    interval INTEGER NOT NULL CHECK (interval > 0),
    start_date DATE NOT NULL,
    end_date DATE,
    next_occurrence DATE NOT NULL,
    
    is_active BOOLEAN DEFAULT TRUE,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    CONSTRAINT positive_recurring_amount CHECK (amount > 0)
);

CREATE INDEX idx_recurring_next_occurrence ON recurring_transactions(next_occurrence);
CREATE INDEX idx_recurring_active ON recurring_transactions(is_active);
```

#### –¢–∞–±–ª–∏—Ü–∞ currencies

```sql
CREATE TABLE currencies (
    code VARCHAR(3) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    symbol VARCHAR(10) NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Seed –¥–∞–Ω–Ω—ã–µ
INSERT INTO currencies (code, name, symbol) VALUES
    ('USD', 'US Dollar', '$'),
    ('EUR', 'Euro', '‚Ç¨'),
    ('GBP', 'British Pound', '¬£'),
    ('JPY', 'Japanese Yen', '¬•'),
    ('CNY', 'Chinese Yuan', '¬•'),
    ('RUB', 'Russian Ruble', '‚ÇΩ'),
    ('INR', 'Indian Rupee', '‚Çπ'),
    ('BRL', 'Brazilian Real', 'R$'),
    ('CAD', 'Canadian Dollar', 'C$'),
    ('AUD', 'Australian Dollar', 'A$');
```

#### –¢–∞–±–ª–∏—Ü–∞ exchange_rates

```sql
CREATE TABLE exchange_rates (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    from_currency VARCHAR(3) NOT NULL REFERENCES currencies(code),
    to_currency VARCHAR(3) NOT NULL REFERENCES currencies(code),
    rate DECIMAL(20, 10) NOT NULL CHECK (rate > 0),
    date DATE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    CONSTRAINT unique_rate_per_day UNIQUE (from_currency, to_currency, date)
);

CREATE INDEX idx_exchange_rates_currencies ON exchange_rates(from_currency, to_currency);
CREATE INDEX idx_exchange_rates_date ON exchange_rates(date);
```

#### –¢–∞–±–ª–∏—Ü–∞ task_results

```sql
CREATE TABLE task_results (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    task_id VARCHAR(255) UNIQUE NOT NULL,
    task_type VARCHAR(50) NOT NULL,
    status VARCHAR(20) NOT NULL CHECK (status IN ('pending', 'running', 'completed', 'failed')),
    result JSONB,
    error TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_task_results_task_id ON task_results(task_id);
CREATE INDEX idx_task_results_status ON task_results(status);
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã transactions –¥–ª—è –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—É—Ä—Å–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
ALTER TABLE transactions ADD COLUMN exchange_rate DECIMAL(20, 10);
ALTER TABLE transactions ADD COLUMN base_currency VARCHAR(3) DEFAULT 'USD';

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –≤–∞–ª—é—Ç–µ
CREATE INDEX idx_transactions_currency ON transactions(currency);
```

## –°–≤–æ–π—Å—Ç–≤–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

*–°–≤–æ–π—Å—Ç–≤–æ ‚Äî —ç—Ç–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –∏–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤–æ –≤—Å–µ—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è—Ö —Å–∏—Å—Ç–µ–º—ã, –ø–æ —Å—É—Ç–∏, —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –¥–µ–ª–∞—Ç—å. –°–≤–æ–π—Å—Ç–≤–∞ —Å–ª—É–∂–∞—Ç –º–æ—Å—Ç–æ–º –º–µ–∂–¥—É —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–º–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏ –∏ –º–∞—à–∏–Ω–Ω–æ-–ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–º–∏ –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏.*

–ü–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º —Å–≤–æ–π—Å—Ç–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø—Ä–∏–µ–º–∫–∏:

### –†–µ—Ñ–ª–µ–∫—Å–∏—è —Å–≤–æ–π—Å—Ç–≤

–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø—Ä–∏—ë–º–∫–∏ –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≥—Ä—É–ø–ø—ã —Å–≤–æ–π—Å—Ç–≤ –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è:

**CSV Validation Properties (1.4, 1.5, 1.8, 1.9, 7.1-7.4, 7.7-7.8)**: –í—Å–µ —ç—Ç–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é CSV –¥–∞–Ω–Ω—ã—Ö. –ú–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ –æ —Ç–æ–º, —á—Ç–æ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö.

**CSV Normalization Properties (7.5, 7.6, 7.9)**: –í—Å–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö. –ú–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ –æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**Recurring Transaction Creation Properties (3.5, 3.6)**: –û–±–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤. –ú–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ.

**Recurring Transaction Lifecycle Properties (3.8, 3.9, 3.10, 3.11)**: –í—Å–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —à–∞–±–ª–æ–Ω–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. –ú–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ.

**Exchange Rate Fallback Properties (4.5, 5.5, 4.12)**: –í—Å–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç fallback –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫—É—Ä—Å–æ–≤. –ú–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ.

**Task Status Properties (6.2, 6.3, 6.4)**: –í—Å–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞–±–æ—Ç—É —Å —Ñ–æ–Ω–æ–≤—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏. –ú–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ –æ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ –∑–∞–¥–∞—á.

### –°–≤–æ–π—Å—Ç–≤–∞

#### –°–≤–æ–π—Å—Ç–≤–æ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å CSV –∏–º–ø–æ—Ä—Ç–∞

*–î–ª—è –ª—é–±–æ–≥–æ* CSV —Ñ–∞–π–ª–∞, –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é, –∏ –≤—Å–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã –≤ –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫–∏ –∏ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 1.4, 1.5, 1.8, 1.9, 7.1, 7.2, 7.3, 7.7, 7.8**

#### –°–≤–æ–π—Å—Ç–≤–æ 2: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö CSV –∏–º–ø–æ—Ä—Ç–∞

*–î–ª—è –ª—é–±–æ–π* —Å—Ç—Ä–æ–∫–∏ CSV, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ: –æ–±—Ä–µ–∑–∞—Ç—å –ø—Ä–æ–±–µ–ª—ã –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—è—Ö, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã –¥–ª—è –¥–æ—Ö–æ–¥–∞ –≤ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ, –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã –¥–ª—è —Ä–∞—Å—Ö–æ–¥–∞ –≤ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 7.5, 7.6, 7.9**

#### –°–≤–æ–π—Å—Ç–≤–æ 3: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–∞–ø–ø–∏–Ω–≥–∞ CSV

*–î–ª—è –ª—é–±—ã—Ö* –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–∞–ø–ø–∏–Ω–≥–∞ –∫–æ–ª–æ–Ω–æ–∫ CSV, –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã –∏—Å—Ö–æ–¥–Ω—ã–º (round-trip —Å–≤–æ–π—Å—Ç–≤–æ).

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 1.2**

#### –°–≤–æ–π—Å—Ç–≤–æ 4: –ü–æ–ª–Ω–æ—Ç–∞ –æ—Ç—á–µ—Ç–∞ –∏–º–ø–æ—Ä—Ç–∞

*–î–ª—è –ª—é–±–æ–≥–æ* —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–º–ø–æ—Ä—Ç–∞ CSV, –æ—Ç—á–µ—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –∏ —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ —Å –¥–µ—Ç–∞–ª—è–º–∏.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 1.7**

#### –°–≤–æ–π—Å—Ç–≤–æ 5: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ

*–î–ª—è –ª—é–±–æ–≥–æ* –∏–º–µ–Ω–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ CSV, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–∞ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ç–∏–ø–æ–º (income/expense).

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 1.10**

#### –°–≤–æ–π—Å—Ç–≤–æ 6: –í—ã–±–æ—Ä–æ—á–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –∫–æ–ª–æ–Ω–æ–∫ CSV

*–î–ª—è –ª—é–±–æ–≥–æ* –Ω–∞–±–æ—Ä–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π CSV —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —ç—Ç–∏ –∫–æ–ª–æ–Ω–∫–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∏ –¥–∞–Ω–Ω—ã—Ö.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 2.2**

#### –°–≤–æ–π—Å—Ç–≤–æ 7: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –≤ CSV —ç–∫—Å–ø–æ—Ä—Ç–µ

*–î–ª—è –ª—é–±–æ–≥–æ* —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç—ã, –≤—Å–µ –¥–∞—Ç—ã –≤ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º CSV —Ñ–∞–π–ª–µ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 2.3**

#### –°–≤–æ–π—Å—Ç–≤–æ 8: –ù–∞–ª–∏—á–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ CSV —ç–∫—Å–ø–æ—Ä—Ç–µ

*–î–ª—è –ª—é–±–æ–≥–æ* —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ CSV —Ñ–∞–π–ª–∞, –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫–æ–ª–æ–Ω–æ–∫, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –ø–æ–ª—è–º.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 2.4**

#### –°–≤–æ–π—Å—Ç–≤–æ 9: –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ CSV

*–î–ª—è –ª—é–±–æ–π* —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ (–∑–∞–ø—è—Ç—ã–µ, –∫–∞–≤—ã—á–∫–∏, –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫) –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—è—Ö, —ç—Ç–∏ —Å–∏–º–≤–æ–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –≤ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º CSV —Ñ–∞–π–ª–µ.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 2.5**

#### –°–≤–æ–π—Å—Ç–≤–æ 10: –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞

*–î–ª—è –ª—é–±–æ–≥–æ* —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ CSV —Ñ–∞–π–ª–∞, –∏–º—è —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞—Ç—É —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 2.7**

#### –°–≤–æ–π—Å—Ç–≤–æ 11: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —à–∞–±–ª–æ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

*–î–ª—è –ª—é–±–æ–≥–æ* —à–∞–±–ª–æ–Ω–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–π—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è, –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å—É–º–º–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã –∏—Å—Ö–æ–¥–Ω—ã–º (round-trip —Å–≤–æ–π—Å—Ç–≤–æ).

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 3.1, 8.3**

#### –°–≤–æ–π—Å—Ç–≤–æ 12: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å—Ç–æ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

*–î–ª—è –ª—é–±–æ–≥–æ* —à–∞–±–ª–æ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ —á–∞—Å—Ç–æ—Ç—ã (daily, weekly, monthly, yearly) –∏ –æ—Ç–∫–ª–æ–Ω—è—Ç—å –¥—Ä—É–≥–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 3.2**

#### –°–≤–æ–π—Å—Ç–≤–æ 13: –ü–µ—Ä–≤–∞—è –¥–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞

*–î–ª—è –ª—é–±–æ–≥–æ* —à–∞–±–ª–æ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –¥–∞—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (next_occurrence) –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–≤–Ω–∞ –¥–∞—Ç–µ –Ω–∞—á–∞–ª–∞ (start_date) –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 3.3**

#### –°–≤–æ–π—Å—Ç–≤–æ 14: –ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å–ª–µ –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è

*–î–ª—è –ª—é–±–æ–≥–æ* —à–∞–±–ª–æ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç–æ–π –æ–∫–æ–Ω—á–∞–Ω–∏—è, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ —ç—Ç–æ–π –¥–∞—Ç—ã.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 3.4**

#### –°–≤–æ–π—Å—Ç–≤–æ 15: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤

*–î–ª—è –ª—é–±–æ–≥–æ* –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∫–æ–≥–¥–∞ –Ω–∞—Å—Ç—É–ø–∞–µ—Ç –¥–∞—Ç–∞ next_occurrence, –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞ –∏ –æ—Ç–º–µ—Ç–∫–æ–π –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 3.5, 3.6**

#### –°–≤–æ–π—Å—Ç–≤–æ 16: –ü–æ–ª–Ω–æ—Ç–∞ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤

*–î–ª—è –ª—é–±–æ–≥–æ* –∑–∞–ø—Ä–æ—Å–∞ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ —à–∞–±–ª–æ–Ω—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Ö —Å—Ç–∞—Ç—É—Å–∞ (–∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ).

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 3.7**

#### –°–≤–æ–π—Å—Ç–≤–æ 17: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —à–∞–±–ª–æ–Ω–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

*–î–ª—è –ª—é–±–æ–≥–æ* —à–∞–±–ª–æ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —à–∞–±–ª–æ–Ω–µ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è) –Ω–µ –¥–æ–ª–∂–Ω—ã –≤–ª–∏—è—Ç—å –Ω–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –≤–ª–∏—è—Ç—å –Ω–∞ —à–∞–±–ª–æ–Ω –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 3.8, 3.9, 3.10, 3.11, 8.5**

#### –°–≤–æ–π—Å—Ç–≤–æ 18: –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

*–î–ª—è –ª—é–±–æ–≥–æ* –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞, –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 8.6**

#### –°–≤–æ–π—Å—Ç–≤–æ 19: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —à–∞–±–ª–æ–Ω–∞

*–î–ª—è –ª—é–±–æ–≥–æ* –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å, –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (name, amount, category_id, frequency, interval, start_date).

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 8.2**

#### –°–≤–æ–π—Å—Ç–≤–æ 20: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã

*–î–ª—è –ª—é–±–æ–π* —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–π –≤ –Ω–µ–æ—Å–Ω–æ–≤–Ω–æ–π –≤–∞–ª—é—Ç–µ, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫—É—Ä—Å –≤–∞–ª—é—Ç—ã –Ω–∞ –¥–∞—Ç—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 4.3, 4.4**

#### –°–≤–æ–π—Å—Ç–≤–æ 21: Fallback –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –∏–∑–≤–µ—Å—Ç–Ω–æ–º—É –∫—É—Ä—Å—É

*–î–ª—è –ª—é–±–æ–π* —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –Ω–µ–æ—Å–Ω–æ–≤–Ω–æ–π –≤–∞–ª—é—Ç–µ, –µ—Å–ª–∏ –∫—É—Ä—Å –Ω–∞ –¥–∞—Ç—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫—É—Ä—Å –¥–ª—è —ç—Ç–æ–π –ø–∞—Ä—ã –≤–∞–ª—é—Ç.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 4.5, 4.12, 5.5**

#### –°–≤–æ–π—Å—Ç–≤–æ 22: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–∞–ª—é—Ç—É –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤

*–î–ª—è –ª—é–±–æ–≥–æ* –Ω–∞–±–æ—Ä–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö, –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤ –≤—Å–µ —Å—É–º–º—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–∞–ª—é—Ç—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫—É—Ä—Å–æ–≤ –Ω–∞ –¥–∞—Ç—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 4.8**

#### –°–≤–æ–π—Å—Ç–≤–æ 23: –ü–µ—Ä–µ—Å—á–µ—Ç –æ—Ç—á–µ—Ç–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–∞–ª—é—Ç—ã

*–î–ª—è –ª—é–±–æ–≥–æ* –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π –≤–∞–ª—é—Ç—ã, –≤—Å–µ –æ—Ç—á–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π –≤–∞–ª—é—Ç—ã.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 4.10**

#### –°–≤–æ–π—Å—Ç–≤–æ 24: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç

*–î–ª—è –ª—é–±–æ–≥–æ* –∑–∞–ø—Ä–æ—Å–∞ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã, –µ—Å–ª–∏ –∫—É—Ä—Å –±—ã–ª –ø–æ–ª—É—á–µ–Ω –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –∫ –≤–Ω–µ—à–Ω–µ–º—É API.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 5.2**

#### –°–≤–æ–π—Å—Ç–≤–æ 25: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∫—ç—à–∞

*–î–ª—è –ª—é–±–æ–≥–æ* –∑–∞–ø—Ä–æ—Å–∞ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã, –µ—Å–ª–∏ –∫—ç—à —É—Å—Ç–∞—Ä–µ–ª (–ø—Ä–æ—à–ª–æ –±–æ–ª–µ–µ 24 —á–∞—Å–æ–≤), —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫—É—Ä—Å –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ API.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 5.3**

#### –°–≤–æ–π—Å—Ç–≤–æ 26: Retry –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API

*–î–ª—è –ª—é–±–æ–≥–æ* –∑–∞–ø—Ä–æ—Å–∞ –∫ –≤–Ω–µ—à–Ω–µ–º—É API –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç, –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –º–∞–∫—Å–∏–º—É–º 3 —Ä–∞–∑–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 5.4**

#### –°–≤–æ–π—Å—Ç–≤–æ 27: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –∫—É—Ä—Å–æ–≤

*–î–ª—è –ª—é–±–æ–≥–æ* –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã, –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ—Ç API, –∫—É—Ä—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç–æ–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á–µ—Ç–∞—Ö.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 5.6**

#### –°–≤–æ–π—Å—Ç–≤–æ 28: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –∫—É—Ä—Å–æ–≤

*–î–ª—è –ª—é–±–æ–π* —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –¥–∞—Ç–æ–π –≤ –ø—Ä–æ—à–ª–æ–º, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—É—Ä—Å –≤–∞–ª—é—Ç—ã –Ω–∞ –¥–∞—Ç—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∞ –Ω–µ —Ç–µ–∫—É—â–∏–π –∫—É—Ä—Å.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 5.7**

#### –°–≤–æ–π—Å—Ç–≤–æ 29: –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

*–î–ª—è –ª—é–±–æ–π* —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏, —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞: –≤–µ—Ä–Ω—É—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É, –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 6.2, 6.3, 6.4**

#### –°–≤–æ–π—Å—Ç–≤–æ 30: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

*–î–ª—è –ª—é–±–æ–π* —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏, –∑–∞–≤–µ—Ä—à–∏–≤—à–µ–π—Å—è —Å –æ—à–∏–±–∫–æ–π, –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∑–∞–¥–∞—á–∏.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 6.7**

#### –°–≤–æ–π—Å—Ç–≤–æ 31: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π

*–î–ª—è –ª—é–±–æ–π* —Å—Ç—Ä–æ–∫–∏ CSV, —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –ø–æ –¥–ª–∏–Ω–µ (–æ–ø–∏—Å–∞–Ω–∏–µ - 500 —Å–∏–º–≤–æ–ª–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏—è - 100 —Å–∏–º–≤–æ–ª–æ–≤), –∏ —Å—Ç—Ä–æ–∫–∏ —Å –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ–º –ª–∏–º–∏—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã.

**–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç: –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è 7.10**

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞ CSV

**–û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö**:
- –ù–µ–≤–∞–ª–∏–¥–Ω–∞—è —Å—É–º–º–∞: –î–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—Ç—Ä–æ–∫–∏ –∏ –ø—Ä–∏—á–∏–Ω—ã
- –ù–µ–≤–∞–ª–∏–¥–Ω–∞—è –¥–∞—Ç–∞: –î–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å—Ç—Ä–æ–∫–∏ –∏ –ø—Ä–∏—á–∏–Ω—ã
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –î–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö
- –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –≤–∞–ª—é—Ç–∞: –î–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –¥–ª–∏–Ω—ã: –î–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö

**–û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞**:
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç CSV: –í–µ—Ä–Ω—É—Ç—å 400 Bad Request —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏
- –û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è: –í–µ—Ä–Ω—É—Ç—å 400 Bad Request
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞: –í–µ—Ä–Ω—É—Ç—å 413 Payload Too Large

**–û—à–∏–±–∫–∏ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á**:
- –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ task_results —Å —Å—Ç–∞—Ç—É—Å–æ–º "failed"
- –¢–∞–π–º–∞—É—Ç –∑–∞–¥–∞—á–∏: –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –∏ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å
- –û—à–∏–±–∫–∞ –ë–î: –û—Ç–∫–∞—Ç–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ task_results

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–∞**:
- –ù–µ–≤–∞–ª–∏–¥–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞: –í–µ—Ä–Ω—É—Ç—å 422 Unprocessable Entity
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª: –í–µ—Ä–Ω—É—Ç—å 422 Unprocessable Entity
- –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞: –í–µ—Ä–Ω—É—Ç—å 422 Unprocessable Entity
- –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: –í–µ—Ä–Ω—É—Ç—å 404 Not Found

**–û—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**:
- –û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏: –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å, –¥–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç—á–µ—Ç –∑–∞–¥–∞—á–∏
- –û—à–∏–±–∫–∞ –ë–î: –û—Ç–∫–∞—Ç–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–±–ª–æ–Ω–æ–º

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏

**–û—à–∏–±–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤**:
- API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—É—Ä—Å
- –í—Å–µ retry –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ—É–¥–∞—á–Ω—ã: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—É—Ä—Å
- –ö—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫—ç—à–µ: –í–µ—Ä–Ω—É—Ç—å 404 Not Found –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ä—É—á–Ω–æ–π –≤–≤–æ–¥
- –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π –∫–æ–¥ –≤–∞–ª—é—Ç—ã: –í–µ—Ä–Ω—É—Ç—å 422 Unprocessable Entity

**–û—à–∏–±–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**:
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫—É—Ä—Å –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: –í–µ—Ä–Ω—É—Ç—å 404 Not Found
- –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞: –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å, –≤–µ—Ä–Ω—É—Ç—å 500 Internal Server Error

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ–± –æ—à–∏–±–∫–µ

–í—Å–µ –æ—à–∏–±–∫–∏ API –¥–æ–ª–∂–Ω—ã —Å–ª–µ–¥–æ–≤–∞—Ç—å –µ–¥–∏–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É:

```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Validation failed",
    "details": [
      {
        "field": "amount",
        "message": "Amount must be greater than 0"
      }
    ]
  }
}
```

–î–ª—è CSV –∏–º–ø–æ—Ä—Ç–∞:

```json
{
  "task_id": "abc-123",
  "status": "completed",
  "created_count": 95,
  "error_count": 5,
  "errors": [
    {
      "row": 3,
      "error": "Invalid amount: not a number"
    },
    {
      "row": 7,
      "error": "Invalid date format"
    }
  ]
}
```

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–≤–æ–π–Ω–æ–π –ø–æ–¥—Ö–æ–¥ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ç—Ä–µ–±—É–µ—Ç –∫–∞–∫ unit —Ç–µ—Å—Ç–æ–≤, —Ç–∞–∫ –∏ property-based —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è:

**Unit —Ç–µ—Å—Ç—ã**: –ü—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã, –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –∏ —É—Å–ª–æ–≤–∏—è –æ—à–∏–±–æ–∫
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–º–ø–æ—Ä—Ç–∞ CSV —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (–ø—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã, —Ñ–∞–π–ª—ã —Å 1000 —Å—Ç—Ä–æ–∫, —Ñ–∞–π–ª—ã —Å 1001 —Å—Ç—Ä–æ–∫–æ–π)
- –°—Ü–µ–Ω–∞—Ä–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π API, –æ—à–∏–±–∫–∏ –ë–î)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ (—Å–µ—Ä–≤–∏—Å—ã, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –∑–∞–¥–∞—á–∏)

**Property —Ç–µ—Å—Ç—ã**: –ü—Ä–æ–≤–µ—Ä—è—é—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏
- –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–ª—è –≤—Å–µ—Ö –≤–∞–ª–∏–¥–Ω—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—é

–û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –¥–æ–ø–æ–ª–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã. Unit —Ç–µ—Å—Ç—ã –ª–æ–≤—è—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –±–∞–≥–∏ —Å–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ property —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ–±—â—É—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞ —à–∏—Ä–æ–∫–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Backend

**–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: pytest + pytest-asyncio + httpx

**–ü–æ–∫—Ä—ã—Ç–∏–µ unit —Ç–µ—Å—Ç–∞–º–∏**:
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–∫–æ–¥—ã —Å—Ç–∞—Ç—É—Å–∞, —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞)
- –°–µ—Ä–≤–∏—Å—ã (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞, —ç–∫—Å–ø–æ—Ä—Ç–∞, –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î)
- Celery –∑–∞–¥–∞—á–∏ (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)
- –í–∞–ª–∏–¥–∞—Ü–∏—è Pydantic —Å—Ö–µ–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º API –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç

**–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è property-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: Hypothesis

**–ü–æ–∫—Ä—ã—Ç–∏–µ property —Ç–µ—Å—Ç–∞–º–∏** (–º–∏–Ω–∏–º—É–º 100 –∏—Ç–µ—Ä–∞—Ü–∏–π –Ω–∞ —Ç–µ—Å—Ç):
- **–°–≤–æ–π—Å—Ç–≤–æ 1**: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å CSV –∏–º–ø–æ—Ä—Ç–∞ –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö CSV —Ñ–∞–π–ª–æ–≤
- **–°–≤–æ–π—Å—Ç–≤–æ 2**: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Å—Ç—Ä–æ–∫ CSV
- **–°–≤–æ–π—Å—Ç–≤–æ 3**: Round-trip —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–∞–ø–ø–∏–Ω–≥–∞
- **–°–≤–æ–π—Å—Ç–≤–æ 4**: –ü–æ–ª–Ω–æ—Ç–∞ –æ—Ç—á–µ—Ç–∞ –∏–º–ø–æ—Ä—Ç–∞ –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–°–≤–æ–π—Å—Ç–≤–æ 5**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –∏–º–µ–Ω
- **–°–≤–æ–π—Å—Ç–≤–æ 6**: –í—ã–±–æ—Ä–æ—á–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –∫–æ–ª–æ–Ω–æ–∫ –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤ –∫–æ–ª–æ–Ω–æ–∫
- **–°–≤–æ–π—Å—Ç–≤–æ 7**: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- **–°–≤–æ–π—Å—Ç–≤–æ 8**: –ù–∞–ª–∏—á–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –¥–ª—è –ª—é–±–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞
- **–°–≤–æ–π—Å—Ç–≤–æ 9**: –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Å—Ç—Ä–æ–∫
- **–°–≤–æ–π—Å—Ç–≤–æ 10**: –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ –¥–ª—è –ª—é–±–æ–π –¥–∞—Ç—ã
- **–°–≤–æ–π—Å—Ç–≤–æ 11**: Round-trip —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —à–∞–±–ª–æ–Ω–∞
- **–°–≤–æ–π—Å—Ç–≤–æ 12**: –í–∞–ª–∏–¥–∞—Ü–∏—è —á–∞—Å—Ç–æ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- **–°–≤–æ–π—Å—Ç–≤–æ 13**: –ü–µ—Ä–≤–∞—è –¥–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞—Ç –Ω–∞—á–∞–ª–∞
- **–°–≤–æ–π—Å—Ç–≤–æ 14**: –ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å–ª–µ –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è
- **–°–≤–æ–π—Å—Ç–≤–æ 15**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
- **–°–≤–æ–π—Å—Ç–≤–æ 16**: –ü–æ–ª–Ω–æ—Ç–∞ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
- **–°–≤–æ–π—Å—Ç–≤–æ 17**: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —à–∞–±–ª–æ–Ω–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **–°–≤–æ–π—Å—Ç–≤–æ 18**: –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- **–°–≤–æ–π—Å—Ç–≤–æ 19**: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —à–∞–±–ª–æ–Ω–∞
- **–°–≤–æ–π—Å—Ç–≤–æ 20**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞ –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–∞–ª—é—Ç
- **–°–≤–æ–π—Å—Ç–≤–æ 21**: Fallback –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –∏–∑–≤–µ—Å—Ç–Ω–æ–º—É –∫—É—Ä—Å—É
- **–°–≤–æ–π—Å—Ç–≤–æ 22**: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–∞–ª—é—Ç—É –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–∞–±–æ—Ä–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **–°–≤–æ–π—Å—Ç–≤–æ 23**: –ü–µ—Ä–µ—Å—á–µ—Ç –æ—Ç—á–µ—Ç–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–∞–ª—é—Ç—ã
- **–°–≤–æ–π—Å—Ç–≤–æ 24**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
- **–°–≤–æ–π—Å—Ç–≤–æ 25**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∫—ç—à–∞
- **–°–≤–æ–π—Å—Ç–≤–æ 26**: Retry –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
- **–°–≤–æ–π—Å—Ç–≤–æ 27**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –∫—É—Ä—Å–æ–≤
- **–°–≤–æ–π—Å—Ç–≤–æ 28**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –∫—É—Ä—Å–æ–≤ –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞—Ç
- **–°–≤–æ–π—Å—Ç–≤–æ 29**: –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- **–°–≤–æ–π—Å—Ç–≤–æ 30**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- **–°–≤–æ–π—Å—Ç–≤–æ 31**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ü–æ–ª–Ω—ã–µ —Ü–∏–∫–ª—ã –∏–º–ø–æ—Ä—Ç–∞ CSV —Å —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ Celery –∑–∞–¥–∞—á–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π API (—Å mock)
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç –≤ –æ—Ç—á–µ—Ç–∞—Ö

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Celery –∑–∞–¥–∞—á**:
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –∏–º–ø–æ—Ä—Ç–∞ CSV
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –∑–∞–¥–∞—á–∞—Ö
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–¥–∞—á

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Frontend

**–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: Jest + React Testing Library

**–ü–æ–∫—Ä—ã—Ç–∏–µ unit —Ç–µ—Å—Ç–∞–º–∏**:
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞ CSV
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤—ã–±–æ—Ä–∞ –≤–∞–ª—é—Ç—ã
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞–ø–ø–∏–Ω–≥–∞, –≤—ã–±–æ—Ä –∫–æ–ª–æ–Ω–æ–∫)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API –∫–ª–∏–µ–Ω—Ç–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

**–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è property-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: fast-check

**–ü–æ–∫—Ä—ã—Ç–∏–µ property —Ç–µ—Å—Ç–∞–º–∏** (–º–∏–Ω–∏–º—É–º 100 –∏—Ç–µ—Ä–∞—Ü–∏–π –Ω–∞ —Ç–µ—Å—Ç):
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª—é—Ç –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Å—É–º–º –∏ –≤–∞–ª—é—Ç
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞—Ç –∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤

**–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: Playwright

**–ü–æ–∫—Ä—ã—Ç–∏–µ E2E —Ç–µ—Å—Ç–∞–º–∏**:
- –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –∏–º–ø–æ—Ä—Ç–∞ CSV (–∑–∞–≥—Ä—É–∑–∫–∞, –º–∞–ø–ø–∏–Ω–≥, –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä, –∏–º–ø–æ—Ä—Ç, –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
- –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞ CSV (–≤—ã–±–æ—Ä —Ñ–∏–ª—å—Ç—Ä–æ–≤, –≤—ã–±–æ—Ä –∫–æ–ª–æ–Ω–æ–∫, —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ)
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- –í—ã–±–æ—Ä –≤–∞–ª—é—Ç—ã –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—É–º–º

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è property —Ç–µ—Å—Ç–æ–≤

–ö–∞–∂–¥—ã–π property —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω:
- –í—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –º–∏–Ω–∏–º—É–º 100 –∏—Ç–µ—Ä–∞—Ü–∏–π
- –ò–º–µ—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å —Ç–µ–≥–æ–º: **Feature: additional-features, Property {number}: {property_text}**
- –°—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–≤–æ–π—Å—Ç–≤–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–∏–º–µ—Ä:

```python
from hypothesis import given, strategies as st

# Feature: additional-features, Property 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å CSV –∏–º–ø–æ—Ä—Ç–∞
@given(csv_content=st.text(), mapping=st.builds(CSVColumnMapping))
async def test_csv_validation_and_reporting(csv_content, mapping):
    result = await csv_service.import_csv(csv_content, mapping, "%Y-%m-%d")
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ –æ—Ç—á–µ—Ç–µ
    assert result.error_count == len(result.errors)
    assert all("row" in error and "error" in error for error in result.errors)
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

**Mock –≤–Ω–µ—à–Ω–µ–≥–æ API –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å httpx mock –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ (—É—Å–ø–µ—Ö, –æ—à–∏–±–∫–∞, —Ç–∞–π–º–∞—É—Ç)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å retry –ª–æ–≥–∏–∫—É

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Celery –∑–∞–¥–∞—á**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Celery –≤ eager mode –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –≤ –∑–∞–¥–∞—á–∞—Ö

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Redis –∫—ç—à–∞**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fakeredis –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Redis
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏—Å—Ç–µ—á–µ–Ω–∏–µ TTL
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫—ç—à–∞

## –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏—è 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã recurring_transactions

```python
"""add recurring transactions table

Revision ID: 001_recurring_transactions
Revises: previous_migration
Create Date: 2024-01-15 10:00:00.000000

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

revision = '001_recurring_transactions'
down_revision = 'previous_migration'
branch_labels = None
depends_on = None

def upgrade():
    op.create_table(
        'recurring_transactions',
        sa.Column('id', postgresql.UUID(as_uuid=True), primary_key=True),
        sa.Column('name', sa.String(200), nullable=False),
        sa.Column('amount', sa.Numeric(15, 2), nullable=False),
        sa.Column('currency', sa.String(3), nullable=False, server_default='USD'),
        sa.Column('category_id', postgresql.UUID(as_uuid=True), sa.ForeignKey('categories.id'), nullable=False),
        sa.Column('description', sa.Text, nullable=True),
        sa.Column('type', sa.String(10), nullable=False),
        sa.Column('frequency', sa.String(20), nullable=False),
        sa.Column('interval', sa.Integer, nullable=False),
        sa.Column('start_date', sa.Date, nullable=False),
        sa.Column('end_date', sa.Date, nullable=True),
        sa.Column('next_occurrence', sa.Date, nullable=False),
        sa.Column('is_active', sa.Boolean, server_default='true'),
        sa.Column('created_at', sa.DateTime, server_default=sa.func.now()),
        sa.Column('updated_at', sa.DateTime, server_default=sa.func.now(), onupdate=sa.func.now()),
        sa.CheckConstraint('amount > 0', name='check_positive_recurring_amount'),
        sa.CheckConstraint("type IN ('income', 'expense')", name='check_valid_recurring_type'),
        sa.CheckConstraint("frequency IN ('daily', 'weekly', 'monthly', 'yearly')", name='check_valid_frequency'),
        sa.CheckConstraint('interval > 0', name='check_positive_interval'),
    )
    
    op.create_index('idx_recurring_next_occurrence', 'recurring_transactions', ['next_occurrence'])
    op.create_index('idx_recurring_active', 'recurring_transactions', ['is_active'])

def downgrade():
    op.drop_index('idx_recurring_active', table_name='recurring_transactions')
    op.drop_index('idx_recurring_next_occurrence', table_name='recurring_transactions')
    op.drop_table('recurring_transactions')
```

### –ú–∏–≥—Ä–∞—Ü–∏—è 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü currencies –∏ exchange_rates

```python
"""add currencies and exchange rates tables

Revision ID: 002_currencies
Revises: 001_recurring_transactions
Create Date: 2024-01-15 11:00:00.000000

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

revision = '002_currencies'
down_revision = '001_recurring_transactions'
branch_labels = None
depends_on = None

def upgrade():
    # –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É currencies
    op.create_table(
        'currencies',
        sa.Column('code', sa.String(3), primary_key=True),
        sa.Column('name', sa.String(100), nullable=False),
        sa.Column('symbol', sa.String(10), nullable=False),
        sa.Column('is_active', sa.Boolean, server_default='true'),
        sa.Column('created_at', sa.DateTime, server_default=sa.func.now()),
    )
    
    # –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É exchange_rates
    op.create_table(
        'exchange_rates',
        sa.Column('id', postgresql.UUID(as_uuid=True), primary_key=True),
        sa.Column('from_currency', sa.String(3), sa.ForeignKey('currencies.code'), nullable=False),
        sa.Column('to_currency', sa.String(3), sa.ForeignKey('currencies.code'), nullable=False),
        sa.Column('rate', sa.Numeric(20, 10), nullable=False),
        sa.Column('date', sa.Date, nullable=False),
        sa.Column('created_at', sa.DateTime, server_default=sa.func.now()),
        sa.UniqueConstraint('from_currency', 'to_currency', 'date', name='unique_rate_per_day'),
        sa.CheckConstraint('rate > 0', name='check_positive_rate'),
    )
    
    op.create_index('idx_exchange_rates_currencies', 'exchange_rates', ['from_currency', 'to_currency'])
    op.create_index('idx_exchange_rates_date', 'exchange_rates', ['date'])
    
    # –î–æ–±–∞–≤–∏—Ç—å seed –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∞–ª—é—Ç
    op.execute("""
        INSERT INTO currencies (code, name, symbol) VALUES
        ('USD', 'US Dollar', '$'),
        ('EUR', 'Euro', '‚Ç¨'),
        ('GBP', 'British Pound', '¬£'),
        ('JPY', 'Japanese Yen', '¬•'),
        ('CNY', 'Chinese Yuan', '¬•'),
        ('RUB', 'Russian Ruble', '‚ÇΩ'),
        ('INR', 'Indian Rupee', '‚Çπ'),
        ('BRL', 'Brazilian Real', 'R$'),
        ('CAD', 'Canadian Dollar', 'C$'),
        ('AUD', 'Australian Dollar', 'A$')
    """)

def downgrade():
    op.drop_index('idx_exchange_rates_date', table_name='exchange_rates')
    op.drop_index('idx_exchange_rates_currencies', table_name='exchange_rates')
    op.drop_table('exchange_rates')
    op.drop_table('currencies')
```

### –ú–∏–≥—Ä–∞—Ü–∏—è 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã task_results –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ transactions

```python
"""add task results and update transactions for multi-currency

Revision ID: 003_tasks_and_multicurrency
Revises: 002_currencies
Create Date: 2024-01-15 12:00:00.000000

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

revision = '003_tasks_and_multicurrency'
down_revision = '002_currencies'
branch_labels = None
depends_on = None

def upgrade():
    # –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É task_results
    op.create_table(
        'task_results',
        sa.Column('id', postgresql.UUID(as_uuid=True), primary_key=True),
        sa.Column('task_id', sa.String(255), unique=True, nullable=False),
        sa.Column('task_type', sa.String(50), nullable=False),
        sa.Column('status', sa.String(20), nullable=False),
        sa.Column('result', postgresql.JSONB, nullable=True),
        sa.Column('error', sa.Text, nullable=True),
        sa.Column('created_at', sa.DateTime, server_default=sa.func.now()),
        sa.Column('updated_at', sa.DateTime, server_default=sa.func.now(), onupdate=sa.func.now()),
        sa.CheckConstraint("status IN ('pending', 'running', 'completed', 'failed')", name='check_valid_status'),
    )
    
    op.create_index('idx_task_results_task_id', 'task_results', ['task_id'])
    op.create_index('idx_task_results_status', 'task_results', ['status'])
    
    # –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É transactions –¥–ª—è –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏
    op.add_column('transactions', sa.Column('exchange_rate', sa.Numeric(20, 10), nullable=True))
    op.add_column('transactions', sa.Column('base_currency', sa.String(3), server_default='USD'))
    op.create_index('idx_transactions_currency', 'transactions', ['currency'])

def downgrade():
    op.drop_index('idx_transactions_currency', table_name='transactions')
    op.drop_column('transactions', 'base_currency')
    op.drop_column('transactions', 'exchange_rate')
    
    op.drop_index('idx_task_results_status', table_name='task_results')
    op.drop_index('idx_task_results_task_id', table_name='task_results')
    op.drop_table('task_results')
```

## Docker Compose –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å Redis –∏ Celery —Å–µ—Ä–≤–∏—Å—ã –≤ docker-compose.yml:

```yaml
services:
  # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã (postgres, backend, frontend)
  
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5
  
  celery_worker:
    build: ./backend
    command: celery -A app.tasks.celery_app worker --loglevel=info
    volumes:
      - ./backend:/app
    environment:
      - DATABASE_URL=postgresql+asyncpg://user:password@postgres:5432/finance_db
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - postgres
      - redis
  
  celery_beat:
    build: ./backend
    command: celery -A app.tasks.celery_app beat --loglevel=info
    volumes:
      - ./backend:/app
    environment:
      - DATABASE_URL=postgresql+asyncpg://user:password@postgres:5432/finance_db
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - postgres
      - redis

volumes:
  postgres_data:
  redis_data:
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–∏—Ç—å –≤ backend/requirements.txt:

```
# –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
fastapi
sqlalchemy[asyncio]
asyncpg
pydantic
alembic
pytest
pytest-asyncio
httpx

# –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
celery[redis]==5.3.4
redis==5.0.1
pandas==2.1.4
python-dateutil==2.8.2
hypothesis==6.92.1  # –¥–ª—è property-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

–î–æ–±–∞–≤–∏—Ç—å –≤ frontend/package.json:

```json
{
  "dependencies": {
    "react-hook-form": "^7.49.0",
    "papaparse": "^5.4.1"
  },
  "devDependencies": {
    "fast-check": "^3.15.0"
  }
}
```
